<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="css/reset.css" type="text/css">
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,minimal-ui" />
    <meta name="msapplication-tap-highlight" content="no" />
    <script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="js/createjs-2013.12.12.min.js"></script>
    <script type="text/javascript" src="js/ctl_utils.js"></script>
    <script type="text/javascript" src="js/sprite_lib.js"></script>
    <script type="text/javascript" src="js/settings.js"></script>
    <script type="text/javascript" src="js/CMath.js"></script>
    <script type="text/javascript" src="js/CVector2.js"></script>
    <script type="text/javascript" src="js/CLang.js"></script>
    <script type="text/javascript" src="js/CPreloader.js"></script>
    <script type="text/javascript" src="js/CMain.js"></script>
    <script type="text/javascript" src="js/CTextButton.js"></script>
    <script type="text/javascript" src="js/CToggle.js"></script>
    <script type="text/javascript" src="js/CGfxButton.js"></script>
    <script type="text/javascript" src="js/CMenu.js"></script>
    <script type="text/javascript" src="js/CGame.js"></script>
    <script type="text/javascript" src="js/CInterface.js"></script>
    <script type="text/javascript" src="js/CHelpPanel.js"></script>
    <script type="text/javascript" src="js/CEndPanel.js"></script>
    <script type="text/javascript" src="js/CBall.js"></script>
    <script type="text/javascript" src="js/CNextLevelPanel.js"></script>
    <script type="text/javascript" src="js/CCreditsPanel.js"></script>
    <script type="text/javascript" src="js/CLevelMenu.js"></script>
    <script type="text/javascript" src="js/CLevelBut.js"></script>
    <script type="text/javascript" src="js/CMsgBox.js"></script>
    <!-- mat: <script type="text/javascript" src="js/CSavingManager.js"></script> -->

    <link rel="stylesheet" href="../../css/common.css">
    <script type="text/javascript" src="../../js/minigamecontroller.js"></script>
</head>
<body ondragstart="return false;" ondrop="return false;">
    <div style="position: fixed; background-color: transparent; top: 0px; left: 0px; width: 100%; height: 100%"></div>
    <script>
        $(document).ready(function () {

            // mat:
            if (window === window.parent) {
                window.location = "/";
                return;
            }
            if (typeof MinigameController === "undefined" || !MinigameController.level > 0) {
                window.parent.location = "/";
                return;
            }
            var levelPassed = false;
            // /mat

            var oMain = new CMain({
                board_y:390,         //Y OF BALL ATTACH
                ball_speed: 4,       //BALL SPEED
                ball_colors:9,       //NUMBER OF DIFFERENT COLORED BALLS
                shot_for_ceiling: 5, //NUMBER OF SHOT BEFORE CEIL GOES DOWN
                score_explosion:15,  //POINTS FOR EACH BALL EXPLOSION
                score_fall:20       //POINTS FOR EACH FALLEN BALL
            });

            $(oMain).on("start_session", function(evt) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeStartSession();
                }
                //...ADD YOUR CODE HERE EVENTUALLY

                // mat:
                oMain.gotoGame(MinigameController.level, 0);
                // /mat
            });

            $(oMain).on("end_session", function(evt) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeEndSession();
                }
                //...ADD YOUR CODE HERE EVENTUALLY

                // mat:
                window.parent.endLevel(levelPassed);
                // /mat
            });

            $(oMain).on("save_score", function(evt,iScore) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeSaveScore({score:iScore});
                }
                //...ADD YOUR CODE HERE EVENTUALLY
            });

            $(oMain).on("start_level", function(evt,iLevel) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeStartLevel({level:iLevel});
                }
                //...ADD YOUR CODE HERE EVENTUALLY

                // mat:
                levelPassed = false;
                // /mat
            });

            $(oMain).on("end_level", function(evt,iLevel) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeEndLevel({level:iLevel});
                }
                //...ADD YOUR CODE HERE EVENTUALLY

                // mat:
                window.parent.endLevel(levelPassed = true);
                // /mat
            });

            $(oMain).on("show_interlevel_ad", function (evt) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeShowInterlevelAD();
                }
                //...ADD YOUR CODE HERE EVENTUALLY
            });

            $(oMain).on("share_event", function (evt, iScore) {
                if(getParamValue('ctl-arcade') === "true"){
                    parent.__ctlArcadeShareEvent({
                        img: "200x200.jpg",
                        title: TEXT_CONGRATULATIONS,
                        msg:  TEXT_MSG_SHARE1+ iScore + TEXT_MSG_SHARE2,
                        msg_share: TEXT_MSG_SHARING1 + iScore + TEXT_MSG_SHARING2
                    });
                }
                //...ADD YOUR CODE HERE EVENTUALLY
            });

            if(isIOS()){
                setTimeout(function(){sizeHandler();},200);
            }else{
                sizeHandler();
            }
        });

    </script>
    <canvas id="canvas" class='ani_hack' width="870" height="1504"> </canvas>
    <div id="block_game" style="position: fixed; background-color: transparent; top: 0px; left: 0px; width: 100%; height: 100%; display:none"></div>
</body>
</html>
