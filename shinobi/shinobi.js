/*! 
    Shinobi v1.0.0000
    Copyright (c) MDE. All rights reserved.
*/
function byteTable(n){for(var i=new Uint8Array(n.length),t=0;t<n.length;++t)i[t]=n[t];return i}function z80_init(){z80_init_tables()}function z80_init_tables(){for(var t,i,r,n=0;n<256;n++){for(sz53_table[n]=n&168,t=n,r=0,i=0;i<8;i++)r^=t&1,t>>=1;parity_table[n]=r?0:4;sz53p_table[n]=sz53_table[n]|parity_table[n]}sz53_table[0]|=64;sz53p_table[0]|=64}function z80_reset(){z80.a=z80.f=z80.b=z80.c=z80.d=z80.e=z80.h=z80.l=0;z80.a_=z80.f_=z80.b_=z80.c_=z80.d_=z80.e_=z80.h_=z80.l_=0;z80.ixh=z80.ixl=z80.iyh=z80.iyl=0;z80.i=z80.r=z80.r7=0;z80.sp=z80.pc=0;z80.iff1=z80.iff2=z80.im=0;z80.halted=0;z80.irq_pending=!1;z80.irq_suppress=!0}function z80_set_irq(n){z80.irq_pending=n;z80.irq_pending&&z80.iff1&&z80_interrupt()}function z80_interrupt(){var n,t,i;if(z80.iff1){z80.halted&&(z80.pc++,z80.pc&=65535,z80.halted=!1);z80.iff1=z80.iff2=0;z80.sp=z80.sp-1&65535;writebyte(z80.sp,z80.pc>>8);z80.sp=z80.sp-1&65535;writebyte(z80.sp,z80.pc&255);z80.r=z80.r+1&127;switch(z80.im){case 0:z80.pc=56;tstates+=12;break;case 1:z80.pc=56;tstates+=13;break;case 2:n=256*z80.i+255;t=readbyte(n++);n&=4095;i=readbyte(n);z80.pc=t|i<<8;tstates+=19;break;default:ui_error(UI_ERROR_ERROR,"Unknown interrupt mode %d",z80.im);fuse_abort()}}}function z80_instruction_hook(){}function z80_nmi(){z80.iff1=0;z80.sp=z80.sp-1&65535;writebyte(z80.sp,z80.pc>>8);z80.sp=z80.sp-1&65535;writebyte(z80.sp,z80.pc&255);tstates+=11;z80.pc=102}function sign_extend(n){return n<128?n:n-256}function z80_defaults(n){for(var t=0;t<256;++t)n[t]||(n[t]=n[256])}function z80_edxx(n){z80_ed_ops[n]()}function z80_cbxx(n){z80_cb_ops[n]()}function z80_ddxx(n){z80_dd_ops[n]()}function z80_fdxx(n){z80_fd_ops[n]()}function z80_ddfdcbxx(n,t){z80_ddfdcb_ops[n](t)}function z80_do_opcodes(n){for(var i,t;tstates<event_next_event;)z80.irq_pending&&z80.iff1&&(z80.irq_suppress?z80.irq_suppress=!1:(z80.irq_suppress=!0,z80_interrupt())),i=tstates,tstates+=4,z80.r=z80.r+1&127,t=readbyte(z80.pc),z80_instruction_hook(z80.pc,t),z80.pc=z80.pc+1&65535,z80_base_ops[t](),n(tstates-i)}function vdp_writeaddr(n){if(vdp_addr_state===0)vdp_addr_state=1,vdp_addr_latch=n;else{vdp_addr_state=0;switch(n>>>6){case 0:case 1:vdp_mode_select=0;vdp_addr=vdp_addr_latch|(n&63)<<8;break;case 2:var t=n&15;vdp_regs[t]=vdp_addr_latch;switch(t){case 7:update_border()}break;case 3:vdp_mode_select=1;vdp_addr=vdp_addr_latch&31}}}function vdp_writepalette(n){function i(n){var t=n&3;return t|=t<<2,t|t<<4}const r=i(n),u=i(n>>>2),f=i(n>>>4),t=vdp_addr&31;paletteR[t]=r;paletteG[t]=u;paletteB[t]=f;paletteRGB[t]=4278190080|f<<16|u<<8|r;palette[t]=n;vdp_addr=vdp_addr+1&16383;update_border()}function vdp_writeram(n){var i,r,u;vram[vdp_addr]=n;var t=vdp_addr&16380,f=t*2,e=vram[t],o=vram[t+1],s=vram[t+2],h=vram[t+3];for(i=0;i<8;++i)r=7-i,u=e>>>r&1|(o>>>r&1)<<1|(s>>>r&1)<<2|(h>>>r&1)<<3,vramUntwiddled[f+i]=u;vdp_addr=vdp_addr+1&16383}function vdp_writebyte(n){vdp_addr_state=0;vdp_mode_select===0?vdp_writeram(n):vdp_writepalette(n)}function vdp_readram(){var n=vram[vdp_addr];return vdp_addr=vdp_addr+1&16383,n}function vdp_readpalette(){var n=palette[vdp_addr&31];return vdp_addr=vdp_addr+1&16383,n}function vdp_readbyte(){return vdp_addr_state=0,vdp_mode_select===0?vdp_readram():vdp_readpalette()}function update_border(){var n=16+(vdp_regs[7]&15);paletteRGB[n]!==prev_border&&(prev_border=paletteRGB[n],borderColourCss="rgb("+paletteR[n]+","+paletteG[n]+","+paletteB[n]+")")}function vdp_readstatus(){var n=vdp_status;return vdp_status&=31,vdp_pending_hblank=!1,z80_set_irq(!1),vdp_addr_state=0,n}function findSprites(n){var r=(vdp_regs[5]&126)<<7,u=[],f=8,i,t;for(vdp_regs[1]&2&&(f=16),i=0;i<64;i++){if(t=vram[r+i],t===208)break;if(t>=240&&(t-=256),n>=t&&n<t+f){if(u.length===8){vdp_status|=64;break}u.push([vram[r+128+i*2],vram[r+128+i*2+1],t])}}return u}function rasterize_background(n,t,i,r,u){var s,e,f;n=n|0;t=t|0;i=i|0;r=(r|0)*2;i&512?(e=-1,r+=7):e=1;const o=i&2048?16:0;if(u&&o===0)for(s=0;s<8;s++)f=vramUntwiddled[r],r+=e,f!==0&&(fb32[n+t]=paletteRGB[f]),t=t+1&255;else f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,r+=e,fb32[n+t]=paletteRGB[f],t=t+1&255,f=vramUntwiddled[r]+o,fb32[n+t]=paletteRGB[f]}function clear_background(n,t){n=n|0;t=t|0;var i;const r=paletteRGB[0];for(i=0;i<8;++i)fb32[n+t]=r,t=t+1&255}function rasterize_background_line(n,t,i,r){var u;n=n|0;t=t|0;i=i|0;const e=(r|0)*4;for(u=0;u<32;u++){var f=vram[i+u*2]|vram[i+u*2+1]<<8,s=f&511,o=32*s;o+=f&1024?28-e:e;(f&4096)==0?rasterize_background(n,t,f,o,!1):clear_background(n,t);t=t+8&255}}function rasterize_foreground_line(n,t,i,r){var u,f,s,e;n=n|0;t=t|0;i=i|0;const o=(r|0)*4;for(u=0;u<32;u++)(f=vram[i+u*2]|vram[i+u*2+1]<<8,(f&4096)!=0)&&(s=f&511,e=32*s,e+=f&1024?28-o:o,rasterize_background(n,u*8+t&255,f,e,!0))}function rasterize_sprites(n,t,i,r){var u,o,s,f,h;t=t|0;i=i|0;const v=vdp_regs[6]&4?8192:0;for(u=0;u<256;++u){var y=u,c=!1,l=!1,e=256;for(o=0;o<r.length;o++){if(s=r[o],f=y-s[0],f<0){h=-f;h<e&&(e=h);continue}if(!(f>=8)){c=!0;var p=n-s[2],w=v+s[1]*32+p*4,b=w*2+f,a=vramUntwiddled[b];if(a!==0){if(l){vdp_status|=32;break}fb32[t+(i+u-vdp_regs[8]&255)]=paletteRGB[16+a];l=!0}}}!c&&e>1&&(u+=e-1)}}function border_clear(n,t){n=n|0;t=t|0;const r=16+(vdp_regs[7]&15),u=paletteRGB[r];for(var i=0;i<t;i++)fb32[n+i]=u}function rasterize_line(n){n=n|0;const t=n*256|0;if((vdp_regs[1]&64)==0){border_clear(t,256);return}var i=n+vdp_regs[9];i>=224&&(i-=224);const u=findSprites(n),r=vdp_regs[0]&64&&n<16?0:vdp_regs[8],f=(vdp_regs[2]<<10&14336)+(i>>>3)*64,e=i&7;rasterize_background_line(t,r,f,e);u.length&&rasterize_sprites(n,t,r,u);rasterize_foreground_line(t,r,f,e);vdp_regs[0]&32&&border_clear(t,8)}function vdp_frame_hook(){}function vdp_hblank(){const n=70,i=n+192,r=i+48+3;vdp_current_line===n&&(vdp_hblank_counter=vdp_regs[10]);vdp_current_line>=n&&vdp_current_line<i&&(rasterize_line(vdp_current_line-n),--vdp_hblank_counter<0&&(vdp_hblank_counter=vdp_regs[10],vdp_pending_hblank=!0));vdp_current_line++;var t=0;return vdp_current_line===r&&(vdp_current_line=0,vdp_status|=128,t|=4,currentFrame++,vdp_frame_hook(currentFrame),borderColourCss&&(canvas.style.borderColor=borderColourCss,borderColourCss=null)),vdp_regs[1]&32&&vdp_status&128&&(t|=2),vdp_regs[0]&16&&vdp_pending_hblank&&(t|=1),t}function vdp_init(){vram=new Uint8Array(16384);vramUntwiddled=new Uint8Array(32768);palette=new Uint8Array(32);paletteR=new Uint8Array(32);paletteG=new Uint8Array(32);paletteB=new Uint8Array(32);paletteRGB=new Uint32Array(32);vdp_regs=new Uint8Array(16);vdp_reset()}function vdp_reset(){for(var n=0;n<16384;n++)vram[n]=0;for(n=0;n<32;n++)paletteR[n]=paletteG[n]=paletteB[n]=paletteRGB[n]=palette[n]=0;for(n=0;n<16;n++)vdp_regs[n]=0;for(n=2;n<=5;n++)vdp_regs[n]=255;vdp_regs[6]=251;vdp_regs[10]=255;vdp_current_line=vdp_status=vdp_hblank_counter=0;vdp_mode_select=0}function vdp_get_line(){return vdp_current_line-64&255}function vdp_get_x(){return 0}function SoundChip(n,t){"use strict";function ft(n,t,r,u){var f,h=i[n],e=a[n];if(h<=1){for(f=0;f<u;++f)t[f+r]+=e;return}for(f=0;f<u;++f)o[n]-=b,o[n]<0&&(o[n]+=h,s[n]=!s[n]),t[f+r]+=s[n]?e:-e}function d(){var n=r&1^(r&8)>>3;r=r>>1|n<<15}function et(){r>>=1;r===0&&(r=32768)}function g(){w=i[3]&4?d:et;r=32768}function ot(n){n=n|0;switch(i[n]&3){case 0:return 16;case 1:return 32;case 2:return 64;case 3:return i[n-1]}}function st(n,t,i,u){for(var h=ot(n),e=a[n],f=0;f<u;++f)o[n]-=b,o[n]<0&&(o[n]+=h,s[n]=!s[n],s[n]&&w()),t[f+i]+=r&1?e:-e}function nt(n,t,i){t=t|0;i=i|0;for(var r=0;r<i;++r)n[r+t]=0;if(c)for(r=0;r<4;++r)v[r](r,n,t,i)}function tt(){h&&rt(h);h=0}function ht(n,t,i){var u,r;for(tt(),u=e>i?i:e,r=0;r<u;++r)n[t+r]=l[r];for(t+=u,i-=u,r=u;r<e;++r)l[r-u]=l[r];e-=u;i!==0&&nt(n,t,i)}function rt(n){var i=n*ut+it,t=i|0;(it=i-t,e+t>=y&&(t=y-e),t!==0)&&(nt(l,e,t),e+=t)}function ct(n){var t,r;tt();t=!!(n&128);t&&(u=n>>5&3);(n&144)==144?(r=n&15,a[u]=p[r]):u===3?(i[u]=n&15,g()):i[u]=t?i[u]&-16|n&15:i[u]&15|(n&63)<<4}for(var b=3546893/16/n,ut=n/t,i=[0,0,0,0],o=[0,0,0,0],s=[!1,!1,!1,!1],a=[0,0,0,0],v=[null,null,null,null],p=[],k=1,r,w,c,h,u,f=0;f<16;++f)p[f]=k/v.length,k*=Math.pow(10,-.1);p[15]=0;r=0;w=d;c=!0;h=0;this.polltime=function(n){h+=n};var it=0,e=0,y=4096,l;for(l=typeof Float64Array!="undefined"?new Float64Array(y):new Float32Array(y),u=0,f=0;f<3;++f)v[f]=ft;v[3]=st;this.render=ht;this.poke=ct;this.reset=function(){for(var n=0;n<3;++n)o[n]=a[n]=i[n]=0;g();rt(1e5);h=0};this.enable=function(n){c=n};this.mute=function(){c=!1};this.unmute=function(){c=!0}}function cycleCallback(n){soundChip.polltime(n)}function line(){tstates-=tstatesPerHblank;z80_do_opcodes(cycleCallback);var n=vdp_hblank(),t=!!(n&3);return(z80_set_irq(t),n&4)?(paintScreen(),!0):!1}function start(){initialized&&!running&&(running=!0,audio_enable(!0),run())}function run(){var n,t,i;initialized&&running&&((setTimeout(run,0),n=targetTimeout,t=Date.now(),n=t-lastFrame,n>pausedTimeout&&(n=targetTimeout),t-cyclet>999&&(t-cyclet-1e3<targetTimeout&&(document.getElementById("game-fps").textContent=cycles),cycles=0,cyclet=t),n<targetTimeout)||(lastFrame=t-n%targetTimeout,cycles++,i=function(){if(running){for(var n=0;n<linesPerYield;++n)if(line())return;running&&setTimeout(i,0)}},i()))}function stop(){initialized&&running&&(running=!1,audio_enable(!1))}function reset(){miracle_reset()}function pumpAudio(n){var i=n.outputBuffer,t=i.getChannelData(0);soundChip.render(t,0,t.length)}function audio_init(){var n=null,t;if(typeof AudioContext!="undefined")n=new AudioContext;else if(typeof webkitAudioContext!="undefined")n=new webkitAudioContext;else{x.write("Unable to render audio");soundChip=new SoundChip(1e4,cpuHz);return}t=n.createScriptProcessor(1024,0,1);t.onaudioprocess=pumpAudio;t.connect(n.destination,0,0);soundChip=new SoundChip(n.sampleRate,cpuHz)}function audio_enable(n){soundChip.enable(n)}function audio_reset(){soundChip.reset()}function miracle_init(){vdp_init();audio_init();ram=new Uint8Array(8192);cartridgeRam=new Uint8Array(32768);pages=new Uint8Array(3);miracle_reset();canvas=document.getElementById("game-view");ctx=canvas.getContext("2d");ctx.getImageData?(imageData=ctx.getImageData(0,0,256,192),fb8=imageData.data,fb32=new Uint32Array(fb8.buffer)):alert("upgrade your browser, dude");document.onkeydown=keyDown;document.onkeyup=keyUp;document.onkeypress=keyPress;initialized=!0}function miracle_reset(){for(var n=0;n<8192;n++)ram[n]=0;for(n=0;n<32768;n++)cartridgeRam[n]=0;for(n=0;n<3;n++)pages[n]=n;ramSelectRegister=0;inputMode=7;z80_reset();vdp_reset();audio_reset()}function keyCode(n){return n.which||n.charCode||n.keyCode}function keyDown(n){if(running){var t=keys[keyCode(n)];if(t&&(joystick&=~t,!n.metaKey)){n.preventDefault();return}switch(n.keyCode){case 67:loadNextRom();n.preventDefault();break;case 3:case 19:case 80:z80_nmi();n.preventDefault()}}}function keyUp(n){if(running){var t=keys[keyCode(n)];t&&(joystick|=t,n.metaKey||n.preventDefault())}}function keyPress(n){running&&(n.metaKey||n.preventDefault())}function paintScreen(){ctx.putImageData(imageData,0,0)}function loadRom(n,t){var u=t.length/16384,i,r,f;for(console.log("Loading rom of "+u+" banks"),i=0;i<u;i++)for(romBanks[i]=new Uint8Array(16384),r=0;r<16384;r++)romBanks[i][r]=t.charCodeAt(i*16384+r);for(i=0;i<3;i++)pages[i]=i%u;romPageMask=u-1|0;f=romBanks[1][16380]<<8|romBanks[1][16381];console.log("Running "+n+" serial 0x"+hexword(f))}function hexbyte(n){return(n>>4&15).toString(16)+(n&15).toString(16)}function hexword(n){return(n>>12&15).toString(16)+(n>>8&15).toString(16)+(n>>4&15).toString(16)+(n&15).toString(16)}function virtualAddress(n){function t(n,t){return"rom"+n.toString(16)+"_"+hexword(t)}if(n<1024)return t(0,n);if(n<16384)return t(pages[0],n);if(n<32768)return t(pages[1],n-16384);if(n<49152)return(ramSelectRegister&12)==8?"crm_"+hexword(n-32768):(ramSelectRegister&12)==12?"crm_"+hexword(n-16384):t(pages[2],n-32768);if(n<57344)return"ram+"+hexword(n-49152);if(n<65532)return"ram_"+hexword(n-57344);switch(n){case 65532:return"rsr";case 65533:return"rpr_0";case 65534:return"rpr_1";case 65535:return"rpr_2"}return"unk_"+hexword(n)}function readbyte(n){n=n|0;var t=n>>>14&3;n&=16383;switch(t){case 0:return n<1024?romBanks[0][n]:romBanks[pages[0]][n];case 1:return romBanks[pages[1]][n];case 2:switch(ramSelectRegister&12){case 8:return cartridgeRam[n];case 12:return cartridgeRam[n+16384]}return romBanks[pages[2]][n];case 3:return ram[n&8191]}}function writebyte(n,t){if(n=n|0,t=t|0,n>=65532)switch(n){case 65532:ramSelectRegister=t;break;case 65533:t&=romPageMask;pages[0]=t;break;case 65534:t&=romPageMask;pages[1]=t;break;case 65535:t&=romPageMask;pages[2]=t;break;default:console.log("zoiks")}(n-=49152,n<0)||(ram[n&8191]=t)}function readport(n){n&=255;switch(n){case 126:return vdp_get_line();case 127:return vdp_get_x();case 220:case 192:return joystick&255;case 221:case 193:return joystick>>8&255;case 190:return vdp_readbyte();case 189:case 191:return vdp_readstatus();case 222:return 255;case 223:return 255;case 242:return 0;default:return console.log("IO port "+hexbyte(n)+"?"),255}}function writeport(n,t){t=t|0;n&=255;switch(n){case 63:var i=t>>5&1;(t&1)==0&&(i=1);joystick=joystick&-16385|i<<14;i=t>>7&1;(t&4)==0&&(i=1);joystick=joystick&-32769|i<<15;break;case 126:case 127:soundChip.poke(t);break;case 189:case 191:vdp_writeaddr(t);break;case 190:vdp_writebyte(t);break;case 222:inputMode=t;break;case 223:break;case 240:case 241:case 242:break;case 62:break;default:console.log("IO port "+hexbyte(n)+" = "+t)}}function loadRomData(n){var i,t;x.write("Loading "+n.title);i="roms/"+n.file;console.log("Loading rom data from "+i);t=new XMLHttpRequest;t.onload=function(){t.readyState===4&&(t.status===200?(x.write("Rom loaded"),loadRom(n.title,t.response),start()):x.write("Rom loading error: "+t.statusText))};t.onerror=function(){x.write(t.statusText)};t.open("GET",i,!0);t.overrideMimeType("text/plain; charset=x-user-defined");t.send()}function go(){z80_init();miracle_init();miracle_reset();loadRomData(getLastRom())}function getLastRom(){return typeof localStorage!="undefined"&&localStorage.rom?(currentRom=localStorage.rom,roms[currentRom]):roms[0]}function loadNextRom(){if(miracle_reset(),currentRom=++currentRom%roms.length,typeof localStorage!="undefined")try{localStorage.rom=currentRom}catch(n){}loadRomData(roms[currentRom])}var global=window,z80_base_ops,z80_ed_ops,z80_cb_ops,z80_dd_ops,z80_fd_ops,z80_ddfdcb_ops,prev_border,borderColourCss,currentFrame,tstates,keys,running,currentRom;global.x={},function(){"use strict";var n=global.x,i,t;n.versions=["m.JS/v1.0 :"];n.versions.all=function(){return n.versions.join("\n")};n.versions[0]+=" m.core/1";n.noop=function(){};i=+new Date;n.dt=function(){return n.tc()-i};n.tc=function(){return+new Date};"console"in window||(window.console={log:n.noop,assert:n.noop,trace:n.noop,debug:n.noop,info:n.noop,warn:n.noop,error:n.noop});n.E={ARG:"invalid argument",BROWSER:"no browser support",CLASSCTOR:"class constructor expected",FUNCTION:"function expected",INSTANCEOF:"instance of a class expected",SINGLEINST:"only one instance is allowed"};n.isDefined=function(n){return typeof n!="undefined"};n.isFunction=function(n){return typeof n=="function"};n.isNumber=function(n){return typeof n=="number"};n.isString=function(n){return typeof n=="string"||n instanceof String};n.isCollection=function(t){return t instanceof Array||t&&!n.isWindow(t)&&!n.isString(t)&&n.isNumber(t.length)};n.isWindow=function(t){return window.Window&&t instanceof Window||t&&n.isFunction(t.Object)};t=0;n.createClass=function(i,r,u,f){function e(){if(!(this instanceof e))return new e;n.isFunction(u)&&u.apply(this,arguments)}i=i||window;r=r||"<Anonymous_"+ ++t+">";i[r]=e;var o=e.prototype;return o.className=r,o.toString=function(){return"[object "+r+"]"},n.isFunction(f)&&f(o),e};n.extendClass=function(i,r,u,f,e){function o(){if(!(this instanceof o))return new o;i.apply(this,arguments);n.isFunction(f)&&f.apply(this,arguments)}if(!n.isFunction(i))throw new Error(n.E.CLASSCTOR);r=r||window;u=u||"Anonymous_"+ ++t;o.prototype=Object.create?Object.create(i.prototype):new i;r[u]=o.prototype.constructor=o;var h=i.prototype,s=o.prototype;return s.className=u,s.toString=function(){return"[object "+u+"]"},n.isFunction(e)&&e(s,h),o};n.event=function(){return new Delegate};n.property=function(t,i,r){var u=null;return n.isDefined(t)&&(u=t),function(t){return n.isDefined(t)&&u!==t&&(!n.isFunction(i)||i(t)!==!1)&&(u=t,n.isFunction(i)&&r(t)),u}};n.createClass(n,"Delegate",function(){this._fList=[]},function(t){t.add=function(t){if(!n.isFunction(t))throw new Error(n.E.FUNCTION);this._fList.push(t)};t.all=function(){for(var n=this._fList.length;n--;)this._fList[n].apply(this,arguments)};t.length=function(){return this._fList.length};t.remove=function(t){if(!n.isFunction(t))throw new Error(n.E.FUNCTION);for(var i=this._fList.length;i--;)this._fList[i]===t&&this._fList.splice(i,1)}})}(),function(){"use strict";function e(){t&&(t.all(),t=null)}function o(){e();i&&(i.all(),i=null)}var n=global.x,t,i,r,u,f;n.versions[0]+=" m.core.compatibility/1";n.addEventHandler=window.addEventListener?function(t,i,r,u){if(n.isCollection(t))for(var f=0;f<t.length;f++)t[f].addEventListener(i,r,!!u);else n.isString(t)&&(t=document.getElementById(t)),t.addEventListener(i,r,!!u)}:function(t,i,r){if(n.isCollection(t))for(var u=0;u<t.length;u++)t[u].attachEvent("on"+i,r);else n.isString(t)&&(t=document.getElementById(t)),t.attachEvent("on"+i,r)};t=new n.Delegate;i=new n.Delegate;document.readyState==="interactive"?e():document.readyState==="complete"&&o();n.addEventHandler(document,"DOMContentLoaded",e);n.addEventHandler(window,"load",o);n.addContentLoadHandler=function(n){t?t.add(n):n()};n.addPageLoadHandler=function(n){i?i.add(n):n()};"onpointerdown"in window?(u="pointerdown",r=f="pointerup"):"ontouchstart"in window?(u="touchmove",r=f="touchend"):(r="click",u="mousedown",f="mouseup");n.addClickHandler=function(t,i,u){n.addEventHandler(t,r,i,u)};n.addPressHandler=function(t,i,r){n.addEventHandler(t,u,i,r)};n.addReleaseHandler=function(t,i,r){n.addEventHandler(t,f,i,r)};n.addPressReleaseHandlers=function(t,i,r,u){n.addPressHandler(t,i,u);n.addReleaseHandler(t,r,u)};n.cancelEvent=function(t){return t=t||window.event,n.isFunction(t.stopPropagation)&&t.stopPropagation(),n.isFunction(t.preventDefault)&&t.preventDefault(),t.returnValue=!1,t.cancelBubble=!0,!1}}(),function(){"use strict";function o(){window.onerror=function(t,i,r,u,f){var e=f&&f.stack?f.stack:"Error : "+(t||"unknown")+(i&&r&&u?"\n   at "+i+":"+r+":"+u:"");n.app.critical(e)};n.addEventHandler(window,"blur",f,!0);n.addEventHandler(window,"focus",c,!0);n.addEventHandler(window,"keydown",r,!0);n.addEventHandler(window,"keyup",r,!0);n.addEventHandler(window,"resize",h,!0);n.app.initialize();u();document.hasFocus()||f()}function r(t){if((t=t||window.event,t)&&n.app.trapKeys()){var i=t.which||t.charCode||t.keyCode;if(i===116||i===82&&t.ctrlKey||i===8&&!s(t.target))return n.cancelEvent(t)}}function s(n){return n&&!n.disabled&&!n.readOnly&&["INPUT","SELECT","TEXTAREA"].indexOf(n.tagName)>-1}function h(){this.pendingSize&&clearTimeout(this.pendingSize);e=setTimeout(u,66)}function u(){var r=window.innerWidth||document.body.clientWidth,u=window.innerHeight||document.body.clientHeight;(t!==r||i!==u)&&(n.app.layout(t=r,i=u),setTimeout(function(){window.scrollTo(0,1)},33))}function c(){n.write("resume");console.debug("resume");n.app.resume()}function f(){n.write("suspend");console.debug("suspend");n.app.suspend()}var n=global.x;n.versions[0]+=" m.core.app/1";n.showLayout=function(){for(var t=document.getElementsByTagName("X-LAYOUT"),n=0;n<t.length;n++)t[n].style.display=""};document.ondragstart=n.cancelEvent;document.ondrop=n.cancelEvent;document.ontouchmove=n.cancelEvent;n.createClass(n,"App",function(){if(n.app)throw new Error(n.E.SINGLEINST+": "+this.className);n.app=this;n.addContentLoadHandler(o);n.addPageLoadHandler(this.go)},function(t){t.critical=function(t){n.cover("<pre><h1>:{ CRASH!<\/h1>\n"+t+"\n"+n.versions.join("\n")+"<\/pre>")};t.initialize=function(){};t.go=function(){};t.layout=function(){};t.resume=function(){};t.suspend=function(){};t.trapKeys=n.property(!1);t.lockHistory=function(){"history"in window&&(history.state!==this&&history.pushState(this,null,location.href),window.onpopstate=function(){history.go(1)})};t.unlockHistory=function(){"history"in window&&(window.onpopstate=null)}});var t=-1,i=-1,e=0}(),function(){"use strict";var t=global.x;t.versions[0]+=" m.core.dom/1";var n=[],r="x-common-element-",i=0;t.cover=function(t){if(!n.cover){var u=document.createElement("div");u.id=r+"cover";u.style.cssText="display:none;position:absolute;left:0;top:0;width:100%;height:100%;right:0;bottom:0;z-Index:10000;background-color:#999;background-color:rgba(153,153,153,0.75);";document.body.appendChild(u);n.cover=u}i++;n.cover.innerHTML=t||"";n.cover.style.display="block"};t.uncover=function(){i>0&&--i==0&&(n.cover.style.display="none")};t.write=function(t){var i,u,f;n.writeArea||(i=document.createElement("div"),i.id=r+"write-area",i.style.cssText="pointer-events:none;position:absolute;left:0;top:0;width:100%;height:100%;right:0;bottom:0;z-Index:11000;",document.body.appendChild(i),n.writeArea=i);u=document.createElement("pre");f=document.createElement("span");f.style.cssText="background-color:#333333;background-color:rgba(0,0,0,0.50);color:white";f.innerHTML=t;u.appendChild(f);n.writeArea.appendChild(u);setTimeout(function(){n.writeArea.removeChild(u)},3e3)}}(),function(){"use strict";var n=global.x;n.versions[0]+=" m.core.game/1";n.extendClass(n.App,n,"Game",function(){n.addEventHandler([document,window],"contextmenu",n.cancelEvent);this.lockHistory();this.trapKeys(!0)},function(){})}();const halfcarry_add_table=byteTable([0,16,16,16,0,0,0,16]),halfcarry_sub_table=byteTable([0,0,16,0,16,0,16,16]),overflow_add_table=byteTable([0,0,0,4,4,0,0,0]),overflow_sub_table=byteTable([0,4,0,0,0,0,4,0]);var sz53_table=new Uint8Array(256),parity_table=new Uint8Array(256),sz53p_table=new Uint8Array(256),z80={a:0,f:0,b:0,c:0,d:0,e:0,h:0,l:0,a_:0,f_:0,b_:0,c_:0,d_:0,e_:0,h_:0,l_:0,ixh:0,ixl:0,iyh:0,iyl:0,i:0,r:0,r7:0,sp:0,pc:0,iff1:0,iff2:0,im:0,halted:!1,irq_pending:!1,irq_suppress:!1};z80_base_ops=function(){var n=[];return n[0]=function(){},n[1]=function(){tstates+=6;z80.c=readbyte(z80.pc++);z80.pc&=65535;z80.b=readbyte(z80.pc++);z80.pc&=65535},n[2]=function(){tstates+=3;writebyte(z80.c|z80.b<<8,z80.a)},n[3]=function(){tstates+=2;var n=(z80.c|z80.b<<8)+1&65535;z80.b=n>>8;z80.c=n&255},n[4]=function(){z80.b=z80.b+1&255;z80.f=z80.f&1|(z80.b==128?4:0)|(z80.b&15?0:16)|sz53_table[z80.b]},n[5]=function(){z80.f=z80.f&1|(z80.b&15?0:16)|2;z80.b=z80.b-1&255;z80.f|=(z80.b==127?4:0)|sz53_table[z80.b]},n[6]=function(){tstates+=3;z80.b=readbyte(z80.pc++);z80.pc&=65535},n[7]=function(){z80.a=(z80.a&127)<<1|z80.a>>7;z80.f=z80.f&196|z80.a&41},n[8]=function(){var n=z80.a,t=z80.f;z80.a=z80.a_;z80.f=z80.f_;z80.a_=n;z80.f_=t},n[9]=function(){var n=(z80.l|z80.h<<8)+(z80.c|z80.b<<8),t=((z80.l|z80.h<<8)&2048)>>11|((z80.c|z80.b<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.h=n>>8&255;z80.l=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[10]=function(){tstates+=3;z80.a=readbyte(z80.c|z80.b<<8)},n[11]=function(){tstates+=2;var n=(z80.c|z80.b<<8)-1&65535;z80.b=n>>8;z80.c=n&255},n[12]=function(){z80.c=z80.c+1&255;z80.f=z80.f&1|(z80.c==128?4:0)|(z80.c&15?0:16)|sz53_table[z80.c]},n[13]=function(){z80.f=z80.f&1|(z80.c&15?0:16)|2;z80.c=z80.c-1&255;z80.f|=(z80.c==127?4:0)|sz53_table[z80.c]},n[14]=function(){tstates+=3;z80.c=readbyte(z80.pc++);z80.pc&=65535},n[15]=function(){z80.f=z80.f&196|z80.a&1;z80.a=z80.a>>1|(z80.a&1)<<7;z80.f|=z80.a&40},n[16]=function(){tstates+=4;z80.b=z80.b-1&255;z80.b&&(tstates+=5,z80.pc+=sign_extend(readbyte(z80.pc)),z80.pc&=65535);z80.pc++;z80.pc&=65535},n[17]=function(){tstates+=6;z80.e=readbyte(z80.pc++);z80.pc&=65535;z80.d=readbyte(z80.pc++);z80.pc&=65535},n[18]=function(){tstates+=3;writebyte(z80.e|z80.d<<8,z80.a)},n[19]=function(){tstates+=2;var n=(z80.e|z80.d<<8)+1&65535;z80.d=n>>8;z80.e=n&255},n[20]=function(){z80.d=z80.d+1&255;z80.f=z80.f&1|(z80.d==128?4:0)|(z80.d&15?0:16)|sz53_table[z80.d]},n[21]=function(){z80.f=z80.f&1|(z80.d&15?0:16)|2;z80.d=z80.d-1&255;z80.f|=(z80.d==127?4:0)|sz53_table[z80.d]},n[22]=function(){tstates+=3;z80.d=readbyte(z80.pc++);z80.pc&=65535},n[23]=function(){var n=z80.a;z80.a=(z80.a&127)<<1|z80.f&1;z80.f=z80.f&196|z80.a&40|n>>7},n[24]=function(){tstates+=3;tstates+=5;z80.pc+=sign_extend(readbyte(z80.pc));z80.pc&=65535;z80.pc++;z80.pc&=65535},n[25]=function(){var n=(z80.l|z80.h<<8)+(z80.e|z80.d<<8),t=((z80.l|z80.h<<8)&2048)>>11|((z80.e|z80.d<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.h=n>>8&255;z80.l=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[26]=function(){tstates+=3;z80.a=readbyte(z80.e|z80.d<<8)},n[27]=function(){tstates+=2;var n=(z80.e|z80.d<<8)-1&65535;z80.d=n>>8;z80.e=n&255},n[28]=function(){z80.e=z80.e+1&255;z80.f=z80.f&1|(z80.e==128?4:0)|(z80.e&15?0:16)|sz53_table[z80.e]},n[29]=function(){z80.f=z80.f&1|(z80.e&15?0:16)|2;z80.e=z80.e-1&255;z80.f|=(z80.e==127?4:0)|sz53_table[z80.e]},n[30]=function(){tstates+=3;z80.e=readbyte(z80.pc++);z80.pc&=65535},n[31]=function(){var n=z80.a;z80.a=z80.a>>1|(z80.f&1)<<7;z80.f=z80.f&196|z80.a&40|n&1},n[32]=function(){tstates+=3;z80.f&64||(tstates+=5,z80.pc+=sign_extend(readbyte(z80.pc)),z80.pc&=65535);z80.pc++;z80.pc&=65535},n[33]=function(){tstates+=6;z80.l=readbyte(z80.pc++);z80.pc&=65535;z80.h=readbyte(z80.pc++);z80.pc&=65535},n[34]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.l);n&=65535;writebyte(n,z80.h)},n[35]=function(){tstates+=2;var n=(z80.l|z80.h<<8)+1&65535;z80.h=n>>8;z80.l=n&255},n[36]=function(){z80.h=z80.h+1&255;z80.f=z80.f&1|(z80.h==128?4:0)|(z80.h&15?0:16)|sz53_table[z80.h]},n[37]=function(){z80.f=z80.f&1|(z80.h&15?0:16)|2;z80.h=z80.h-1&255;z80.f|=(z80.h==127?4:0)|sz53_table[z80.h]},n[38]=function(){tstates+=3;z80.h=readbyte(z80.pc++);z80.pc&=65535},n[39]=function(){var n=0,u=z80.f&1,i,r,t;(z80.f&16||(z80.a&15)>9)&&(n=6);(u||z80.a>153)&&(n|=96);z80.a>153&&(u=1);z80.f&2?(i=z80.a-n,t=(z80.a&136)>>3|(n&136)>>2|(i&136)>>1,z80.a=i&255,z80.f=(i&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]):(r=z80.a+n,t=(z80.a&136)>>3|(n&136)>>2|(r&136)>>1,z80.a=r&255,z80.f=(r&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]);z80.f=z80.f&-6|u|parity_table[z80.a]},n[40]=function(){tstates+=3;z80.f&64&&(tstates+=5,z80.pc+=sign_extend(readbyte(z80.pc)),z80.pc&=65535);z80.pc++;z80.pc&=65535},n[41]=function(){var n=(z80.l|z80.h<<8)+(z80.l|z80.h<<8),t=((z80.l|z80.h<<8)&2048)>>11|((z80.l|z80.h<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.h=n>>8&255;z80.l=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[42]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.l=readbyte(n++);n&=65535;z80.h=readbyte(n)},n[43]=function(){tstates+=2;var n=(z80.l|z80.h<<8)-1&65535;z80.h=n>>8;z80.l=n&255},n[44]=function(){z80.l=z80.l+1&255;z80.f=z80.f&1|(z80.l==128?4:0)|(z80.l&15?0:16)|sz53_table[z80.l]},n[45]=function(){z80.f=z80.f&1|(z80.l&15?0:16)|2;z80.l=z80.l-1&255;z80.f|=(z80.l==127?4:0)|sz53_table[z80.l]},n[46]=function(){tstates+=3;z80.l=readbyte(z80.pc++);z80.pc&=65535},n[47]=function(){z80.a^=255;z80.f=z80.f&197|z80.a&40|18},n[48]=function(){tstates+=3;z80.f&1||(tstates+=5,z80.pc+=sign_extend(readbyte(z80.pc)),z80.pc&=65535);z80.pc++;z80.pc&=65535},n[49]=function(){var n,t;tstates+=6;n=readbyte(z80.pc++);z80.pc&=65535;t=readbyte(z80.pc++);z80.sp=n|t<<8;z80.pc&=65535},n[50]=function(){tstates+=3;var n=readbyte(z80.pc++);z80.pc&=65535;tstates+=6;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n,z80.a)},n[51]=function(){tstates+=2;z80.sp=z80.sp+1&65535},n[52]=function(){tstates+=7;var n=readbyte(z80.l|z80.h<<8);n=n+1&255;z80.f=z80.f&1|(n==128?4:0)|(n&15?0:16)|sz53_table[n];writebyte(z80.l|z80.h<<8,n)},n[53]=function(){tstates+=7;var n=readbyte(z80.l|z80.h<<8);z80.f=z80.f&1|(n&15?0:16)|2;n=n-1&255;z80.f|=(n==127?4:0)|sz53_table[n];writebyte(z80.l|z80.h<<8,n)},n[54]=function(){tstates+=6;writebyte(z80.l|z80.h<<8,readbyte(z80.pc++));z80.pc&=65535},n[55]=function(){z80.f=z80.f&196|z80.a&40|1},n[56]=function(){tstates+=3;z80.f&1&&(tstates+=5,z80.pc+=sign_extend(readbyte(z80.pc)),z80.pc&=65535);z80.pc++;z80.pc&=65535},n[57]=function(){var n=(z80.l|z80.h<<8)+z80.sp,t=((z80.l|z80.h<<8)&2048)>>11|(z80.sp&2048)>>10|(n&2048)>>9;tstates+=7;z80.h=n>>8&255;z80.l=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[58]=function(){var n;tstates+=9;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.a=readbyte(n)},n[59]=function(){tstates+=2;z80.sp=z80.sp-1&65535},n[60]=function(){z80.a=z80.a+1&255;z80.f=z80.f&1|(z80.a==128?4:0)|(z80.a&15?0:16)|sz53_table[z80.a]},n[61]=function(){z80.f=z80.f&1|(z80.a&15?0:16)|2;z80.a=z80.a-1&255;z80.f|=(z80.a==127?4:0)|sz53_table[z80.a]},n[62]=function(){tstates+=3;z80.a=readbyte(z80.pc++);z80.pc&=65535},n[63]=function(){z80.f=z80.f&196|(z80.f&1?16:1)|z80.a&40},n[64]=function(){},n[65]=function(){z80.b=z80.c},n[66]=function(){z80.b=z80.d},n[67]=function(){z80.b=z80.e},n[68]=function(){z80.b=z80.h},n[69]=function(){z80.b=z80.l},n[70]=function(){tstates+=3;z80.b=readbyte(z80.l|z80.h<<8)},n[71]=function(){z80.b=z80.a},n[72]=function(){z80.c=z80.b},n[73]=function(){},n[74]=function(){z80.c=z80.d},n[75]=function(){z80.c=z80.e},n[76]=function(){z80.c=z80.h},n[77]=function(){z80.c=z80.l},n[78]=function(){tstates+=3;z80.c=readbyte(z80.l|z80.h<<8)},n[79]=function(){z80.c=z80.a},n[80]=function(){z80.d=z80.b},n[81]=function(){z80.d=z80.c},n[82]=function(){},n[83]=function(){z80.d=z80.e},n[84]=function(){z80.d=z80.h},n[85]=function(){z80.d=z80.l},n[86]=function(){tstates+=3;z80.d=readbyte(z80.l|z80.h<<8)},n[87]=function(){z80.d=z80.a},n[88]=function(){z80.e=z80.b},n[89]=function(){z80.e=z80.c},n[90]=function(){z80.e=z80.d},n[91]=function(){},n[92]=function(){z80.e=z80.h},n[93]=function(){z80.e=z80.l},n[94]=function(){tstates+=3;z80.e=readbyte(z80.l|z80.h<<8)},n[95]=function(){z80.e=z80.a},n[96]=function(){z80.h=z80.b},n[97]=function(){z80.h=z80.c},n[98]=function(){z80.h=z80.d},n[99]=function(){z80.h=z80.e},n[100]=function(){},n[101]=function(){z80.h=z80.l},n[102]=function(){tstates+=3;z80.h=readbyte(z80.l|z80.h<<8)},n[103]=function(){z80.h=z80.a},n[104]=function(){z80.l=z80.b},n[105]=function(){z80.l=z80.c},n[106]=function(){z80.l=z80.d},n[107]=function(){z80.l=z80.e},n[108]=function(){z80.l=z80.h},n[109]=function(){},n[110]=function(){tstates+=3;z80.l=readbyte(z80.l|z80.h<<8)},n[111]=function(){z80.l=z80.a},n[112]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.b)},n[113]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.c)},n[114]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.d)},n[115]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.e)},n[116]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.h)},n[117]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.l)},n[118]=function(){z80.halted=1;z80.pc--;z80.pc&=65535},n[119]=function(){tstates+=3;writebyte(z80.l|z80.h<<8,z80.a)},n[120]=function(){z80.a=z80.b},n[121]=function(){z80.a=z80.c},n[122]=function(){z80.a=z80.d},n[123]=function(){z80.a=z80.e},n[124]=function(){z80.a=z80.h},n[125]=function(){z80.a=z80.l},n[126]=function(){tstates+=3;z80.a=readbyte(z80.l|z80.h<<8)},n[127]=function(){},n[128]=function(){var n=z80.a+z80.b,t=(z80.a&136)>>3|(z80.b&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[129]=function(){var n=z80.a+z80.c,t=(z80.a&136)>>3|(z80.c&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[130]=function(){var n=z80.a+z80.d,t=(z80.a&136)>>3|(z80.d&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[131]=function(){var n=z80.a+z80.e,t=(z80.a&136)>>3|(z80.e&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[132]=function(){var n=z80.a+z80.h,t=(z80.a&136)>>3|(z80.h&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[133]=function(){var n=z80.a+z80.l,t=(z80.a&136)>>3|(z80.l&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[134]=function(){tstates+=3;var t=readbyte(z80.l|z80.h<<8),n=z80.a+t,i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[135]=function(){var n=z80.a+z80.a,t=(z80.a&136)>>3|(z80.a&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[136]=function(){var n=z80.a+z80.b+(z80.f&1),t=(z80.a&136)>>3|(z80.b&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[137]=function(){var n=z80.a+z80.c+(z80.f&1),t=(z80.a&136)>>3|(z80.c&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[138]=function(){var n=z80.a+z80.d+(z80.f&1),t=(z80.a&136)>>3|(z80.d&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[139]=function(){var n=z80.a+z80.e+(z80.f&1),t=(z80.a&136)>>3|(z80.e&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[140]=function(){var n=z80.a+z80.h+(z80.f&1),t=(z80.a&136)>>3|(z80.h&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[141]=function(){var n=z80.a+z80.l+(z80.f&1),t=(z80.a&136)>>3|(z80.l&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[142]=function(){tstates+=3;var t=readbyte(z80.l|z80.h<<8),n=z80.a+t+(z80.f&1),i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[143]=function(){var n=z80.a+z80.a+(z80.f&1),t=(z80.a&136)>>3|(z80.a&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[144]=function(){var n=z80.a-z80.b,t=(z80.a&136)>>3|(z80.b&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[145]=function(){var n=z80.a-z80.c,t=(z80.a&136)>>3|(z80.c&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[146]=function(){var n=z80.a-z80.d,t=(z80.a&136)>>3|(z80.d&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[147]=function(){var n=z80.a-z80.e,t=(z80.a&136)>>3|(z80.e&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[148]=function(){var n=z80.a-z80.h,t=(z80.a&136)>>3|(z80.h&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[149]=function(){var n=z80.a-z80.l,t=(z80.a&136)>>3|(z80.l&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[150]=function(){tstates+=3;var t=readbyte(z80.l|z80.h<<8),n=z80.a-t,i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[151]=function(){var n=z80.a-z80.a,t=(z80.a&136)>>3|(z80.a&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[152]=function(){var n=z80.a-z80.b-(z80.f&1),t=(z80.a&136)>>3|(z80.b&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[153]=function(){var n=z80.a-z80.c-(z80.f&1),t=(z80.a&136)>>3|(z80.c&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[154]=function(){var n=z80.a-z80.d-(z80.f&1),t=(z80.a&136)>>3|(z80.d&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[155]=function(){var n=z80.a-z80.e-(z80.f&1),t=(z80.a&136)>>3|(z80.e&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[156]=function(){var n=z80.a-z80.h-(z80.f&1),t=(z80.a&136)>>3|(z80.h&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[157]=function(){var n=z80.a-z80.l-(z80.f&1),t=(z80.a&136)>>3|(z80.l&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[158]=function(){tstates+=3;var t=readbyte(z80.l|z80.h<<8),n=z80.a-t-(z80.f&1),i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[159]=function(){var n=z80.a-z80.a-(z80.f&1),t=(z80.a&136)>>3|(z80.a&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[160]=function(){z80.a&=z80.b;z80.f=16|sz53p_table[z80.a]},n[161]=function(){z80.a&=z80.c;z80.f=16|sz53p_table[z80.a]},n[162]=function(){z80.a&=z80.d;z80.f=16|sz53p_table[z80.a]},n[163]=function(){z80.a&=z80.e;z80.f=16|sz53p_table[z80.a]},n[164]=function(){z80.a&=z80.h;z80.f=16|sz53p_table[z80.a]},n[165]=function(){z80.a&=z80.l;z80.f=16|sz53p_table[z80.a]},n[166]=function(){tstates+=3;var n=readbyte(z80.l|z80.h<<8);z80.a&=n;z80.f=16|sz53p_table[z80.a]},n[167]=function(){z80.a&=z80.a;z80.f=16|sz53p_table[z80.a]},n[168]=function(){z80.a^=z80.b;z80.f=sz53p_table[z80.a]},n[169]=function(){z80.a^=z80.c;z80.f=sz53p_table[z80.a]},n[170]=function(){z80.a^=z80.d;z80.f=sz53p_table[z80.a]},n[171]=function(){z80.a^=z80.e;z80.f=sz53p_table[z80.a]},n[172]=function(){z80.a^=z80.h;z80.f=sz53p_table[z80.a]},n[173]=function(){z80.a^=z80.l;z80.f=sz53p_table[z80.a]},n[174]=function(){tstates+=3;var n=readbyte(z80.l|z80.h<<8);z80.a^=n;z80.f=sz53p_table[z80.a]},n[175]=function(){z80.a^=z80.a;z80.f=sz53p_table[z80.a]},n[176]=function(){z80.a|=z80.b;z80.f=sz53p_table[z80.a]},n[177]=function(){z80.a|=z80.c;z80.f=sz53p_table[z80.a]},n[178]=function(){z80.a|=z80.d;z80.f=sz53p_table[z80.a]},n[179]=function(){z80.a|=z80.e;z80.f=sz53p_table[z80.a]},n[180]=function(){z80.a|=z80.h;z80.f=sz53p_table[z80.a]},n[181]=function(){z80.a|=z80.l;z80.f=sz53p_table[z80.a]},n[182]=function(){tstates+=3;var n=readbyte(z80.l|z80.h<<8);z80.a|=n;z80.f=sz53p_table[z80.a]},n[183]=function(){z80.a|=z80.a;z80.f=sz53p_table[z80.a]},n[184]=function(){var n=z80.a-z80.b,t=(z80.a&136)>>3|(z80.b&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.b&40|n&128},n[185]=function(){var n=z80.a-z80.c,t=(z80.a&136)>>3|(z80.c&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.c&40|n&128},n[186]=function(){var n=z80.a-z80.d,t=(z80.a&136)>>3|(z80.d&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.d&40|n&128},n[187]=function(){var n=z80.a-z80.e,t=(z80.a&136)>>3|(z80.e&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.e&40|n&128},n[188]=function(){var n=z80.a-z80.h,t=(z80.a&136)>>3|(z80.h&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.h&40|n&128},n[189]=function(){var n=z80.a-z80.l,t=(z80.a&136)>>3|(z80.l&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.l&40|n&128},n[190]=function(){tstates+=3;var t=readbyte(z80.l|z80.h<<8),n=z80.a-t,i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|t&40|n&128},n[191]=function(){var n=z80.a-z80.a,t=(z80.a&136)>>3|(z80.a&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.a&40|n&128},n[192]=function(){var n,t;tstates++;z80.f&64||(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[193]=function(){tstates+=6;z80.c=readbyte(z80.sp++);z80.sp&=65535;z80.b=readbyte(z80.sp++);z80.sp&=65535},n[194]=function(){var n,t,i;tstates+=6;z80.f&64?z80.pc+=2:(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8)},n[195]=function(){var n,t,i;tstates+=6;n=z80.pc;t=readbyte(n++);n&=65535;i=readbyte(n);z80.pc=t|i<<8},n[196]=function(){var n,t,i,r;tstates+=6;z80.f&64?z80.pc+=2:(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8)},n[197]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.b);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.c)},n[198]=function(){tstates+=3;var t=readbyte(z80.pc++),n=z80.a+t,i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[199]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=0},n[200]=function(){var n,t;tstates++;z80.f&64&&(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[201]=function(){var n,t;tstates+=6;n=readbyte(z80.sp++);z80.sp&=65535;t=readbyte(z80.sp++);z80.sp&=65535;z80.pc=n|t<<8},n[202]=function(){var n,t,i;tstates+=6;z80.f&64?(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8):z80.pc+=2},n[203]=function(){var n;tstates+=4;n=readbyte(z80.pc++);z80.pc&=65535;z80.r=z80.r+1&127;z80_cbxx(n)},n[204]=function(){var n,t,i,r;tstates+=6;z80.f&64?(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8):z80.pc+=2},n[205]=function(){var n,t,i,r;tstates+=6;n=readbyte(z80.pc++);z80.pc&=65535;tstates++;t=readbyte(z80.pc++);z80.pc&=65535;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);i=n;r=t;z80.pc=i|r<<8},n[206]=function(){tstates+=3;var t=readbyte(z80.pc++),n=z80.a+t+(z80.f&1),i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[207]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=8},n[208]=function(){var n,t;tstates++;z80.f&1||(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[209]=function(){tstates+=6;z80.e=readbyte(z80.sp++);z80.sp&=65535;z80.d=readbyte(z80.sp++);z80.sp&=65535},n[210]=function(){var n,t,i;tstates+=6;z80.f&1?z80.pc+=2:(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8)},n[211]=function(){var n;tstates+=4;n=readbyte(z80.pc++)+(z80.a<<8);z80.pc&=65535;tstates+=3;writeport(n,z80.a)},n[212]=function(){var n,t,i,r;tstates+=6;z80.f&1?z80.pc+=2:(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8)},n[213]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.d);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.e)},n[214]=function(){tstates+=3;var t=readbyte(z80.pc++),n=z80.a-t,i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[215]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=16},n[216]=function(){var n,t;tstates++;z80.f&1&&(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[217]=function(){var n;n=z80.b;z80.b=z80.b_;z80.b_=n;n=z80.c;z80.c=z80.c_;z80.c_=n;n=z80.d;z80.d=z80.d_;z80.d_=n;n=z80.e;z80.e=z80.e_;z80.e_=n;n=z80.h;z80.h=z80.h_;z80.h_=n;n=z80.l;z80.l=z80.l_;z80.l_=n},n[218]=function(){var n,t,i;tstates+=6;z80.f&1?(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8):z80.pc+=2},n[219]=function(){var n;tstates+=4;n=readbyte(z80.pc++)+(z80.a<<8);z80.pc&=65535;tstates+=3;z80.a=readport(n)},n[220]=function(){var n,t,i,r;tstates+=6;z80.f&1?(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8):z80.pc+=2},n[221]=function(){var n;tstates+=4;n=readbyte(z80.pc++);z80.pc&=65535;z80.r=z80.r+1&127;z80_ddxx(n)},n[222]=function(){tstates+=3;var t=readbyte(z80.pc++),n=z80.a-t-(z80.f&1),i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[223]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=24},n[224]=function(){var n,t;tstates++;z80.f&4||(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[225]=function(){tstates+=6;z80.l=readbyte(z80.sp++);z80.sp&=65535;z80.h=readbyte(z80.sp++);z80.sp&=65535},n[226]=function(){var n,t,i;tstates+=6;z80.f&4?z80.pc+=2:(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8)},n[227]=function(){var n=readbyte(z80.sp),t=readbyte(z80.sp+1);tstates+=15;writebyte(z80.sp+1,z80.h);writebyte(z80.sp,z80.l);z80.l=n;z80.h=t},n[228]=function(){var n,t,i,r;tstates+=6;z80.f&4?z80.pc+=2:(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8)},n[229]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.h);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.l)},n[230]=function(){tstates+=3;var n=readbyte(z80.pc++);z80.a&=n;z80.f=16|sz53p_table[z80.a]},n[231]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=32},n[232]=function(){var n,t;tstates++;z80.f&4&&(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[233]=function(){z80.pc=z80.l|z80.h<<8},n[234]=function(){var n,t,i;tstates+=6;z80.f&4?(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8):z80.pc+=2},n[235]=function(){var n;n=z80.d;z80.d=z80.h;z80.h=n;n=z80.e;z80.e=z80.l;z80.l=n},n[236]=function(){var n,t,i,r;tstates+=6;z80.f&4?(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8):z80.pc+=2},n[237]=function(){var n;tstates+=4;n=readbyte(z80.pc++);z80.pc&=65535;z80.r=z80.r+1&127;z80_edxx(n)},n[238]=function(){tstates+=3;var n=readbyte(z80.pc++);z80.a^=n;z80.f=sz53p_table[z80.a]},n[239]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=40},n[240]=function(){var n,t;tstates++;z80.f&128||(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[241]=function(){tstates+=6;z80.f=readbyte(z80.sp++);z80.sp&=65535;z80.a=readbyte(z80.sp++);z80.sp&=65535},n[242]=function(){var n,t,i;tstates+=6;z80.f&128?z80.pc+=2:(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8)},n[243]=function(){z80.iff1=z80.iff2=0},n[244]=function(){var n,t,i,r;tstates+=6;z80.f&128?z80.pc+=2:(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8)},n[245]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.a);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.f)},n[246]=function(){tstates+=3;var n=readbyte(z80.pc++);z80.a|=n;z80.f=sz53p_table[z80.a]},n[247]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=48},n[248]=function(){var n,t;tstates++;z80.f&128&&(tstates+=6,n=readbyte(z80.sp++),z80.sp&=65535,t=readbyte(z80.sp++),z80.sp&=65535,z80.pc=n|t<<8)},n[249]=function(){tstates+=2;z80.sp=z80.l|z80.h<<8},n[250]=function(){var n,t,i;tstates+=6;z80.f&128?(n=z80.pc,t=readbyte(n++),n&=65535,i=readbyte(n),z80.pc=t|i<<8):z80.pc+=2},n[251]=function(){z80.iff1=z80.iff2=1},n[252]=function(){var n,t,i,r;tstates+=6;z80.f&128?(n=readbyte(z80.pc++),z80.pc&=65535,tstates++,t=readbyte(z80.pc++),z80.pc&=65535,tstates+=6,z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc>>8),z80.sp--,z80.sp&=65535,writebyte(z80.sp,z80.pc&255),i=n,r=t,z80.pc=i|r<<8):z80.pc+=2},n[253]=function(){var n;tstates+=4;n=readbyte(z80.pc++);z80.pc&=65535;z80.r=z80.r+1&127;z80_fdxx(n)},n[254]=function(){tstates+=3;var t=readbyte(z80.pc++),n=z80.a-t,i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|t&40|n&128},n[255]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc>>8);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.pc&255);z80.pc=56},n[256]=function(){},z80_defaults(n),n}();z80_ed_ops=function(){var n=[];return n[64]=function(){tstates+=1;tstates+=3;z80.b=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.b]},n[65]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.b)},n[66]=function(){tstates+=7;var n=(z80.l|z80.h<<8)-(z80.c|z80.b<<8)-(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|((z80.c|z80.b<<8)&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|2|overflow_sub_table[t>>4]|z80.h&168|halfcarry_sub_table[t&7]|(z80.l|z80.h<<8?0:64)},n[67]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.c);n&=65535;writebyte(n,z80.b)},n[68]=n[76]=n[84]=n[92]=n[100]=n[108]=n[116]=n[124]=function(){var i=z80.a,n,t;z80.a=0;n=z80.a-i;t=(z80.a&136)>>3|(i&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[69]=n[77]=n[85]=n[93]=n[101]=n[109]=n[117]=n[125]=function(){var n,t;z80.iff1=z80.iff2;tstates+=6;n=readbyte(z80.sp++);z80.sp&=65535;t=readbyte(z80.sp++);z80.sp&=65535;z80.pc=n|t<<8},n[70]=n[78]=n[102]=n[110]=function(){z80.im=0},n[71]=function(){tstates+=1;z80.i=z80.a},n[72]=function(){tstates+=1;tstates+=3;z80.c=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.c]},n[73]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.c)},n[74]=function(){tstates+=7;var n=(z80.l|z80.h<<8)+(z80.c|z80.b<<8)+(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|((z80.c|z80.b<<8)&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|overflow_add_table[t>>4]|z80.h&168|halfcarry_add_table[t&7]|(z80.l|z80.h<<8?0:64)},n[75]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.c=readbyte(n++);n&=65535;z80.b=readbyte(n)},n[79]=function(){tstates+=1;z80.r=z80.r7=z80.a},n[80]=function(){tstates+=1;tstates+=3;z80.d=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.d]},n[81]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.d)},n[82]=function(){tstates+=7;var n=(z80.l|z80.h<<8)-(z80.e|z80.d<<8)-(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|((z80.e|z80.d<<8)&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|2|overflow_sub_table[t>>4]|z80.h&168|halfcarry_sub_table[t&7]|(z80.l|z80.h<<8?0:64)},n[83]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.e);n&=65535;writebyte(n,z80.d)},n[86]=n[118]=function(){z80.im=1},n[87]=function(){tstates+=1;z80.a=z80.i;z80.f=z80.f&1|sz53_table[z80.a]|(z80.iff2?4:0)},n[88]=function(){tstates+=1;tstates+=3;z80.e=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.e]},n[89]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.e)},n[90]=function(){tstates+=7;var n=(z80.l|z80.h<<8)+(z80.e|z80.d<<8)+(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|((z80.e|z80.d<<8)&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|overflow_add_table[t>>4]|z80.h&168|halfcarry_add_table[t&7]|(z80.l|z80.h<<8?0:64)},n[91]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.e=readbyte(n++);n&=65535;z80.d=readbyte(n)},n[94]=n[126]=function(){z80.im=2},n[95]=function(){tstates+=1;z80.a=z80.r&127|z80.r7&128;z80.f=z80.f&1|sz53_table[z80.a]|(z80.iff2?4:0)},n[96]=function(){tstates+=1;tstates+=3;z80.h=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.h]},n[97]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.h)},n[98]=function(){tstates+=7;var n=(z80.l|z80.h<<8)-(z80.l|z80.h<<8)-(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|((z80.l|z80.h<<8)&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|2|overflow_sub_table[t>>4]|z80.h&168|halfcarry_sub_table[t&7]|(z80.l|z80.h<<8?0:64)},n[99]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.l);n&=65535;writebyte(n,z80.h)},n[103]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=10;writebyte(z80.l|z80.h<<8,(z80.a&15)<<4|n>>4);z80.a=z80.a&240|n&15;z80.f=z80.f&1|sz53p_table[z80.a]},n[104]=function(){tstates+=1;tstates+=3;z80.l=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.l]},n[105]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.l)},n[106]=function(){tstates+=7;var n=(z80.l|z80.h<<8)+(z80.l|z80.h<<8)+(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|((z80.l|z80.h<<8)&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|overflow_add_table[t>>4]|z80.h&168|halfcarry_add_table[t&7]|(z80.l|z80.h<<8?0:64)},n[107]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.l=readbyte(n++);n&=65535;z80.h=readbyte(n)},n[111]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=10;writebyte(z80.l|z80.h<<8,(n&15)<<4|z80.a&15);z80.a=z80.a&240|n>>4;z80.f=z80.f&1|sz53p_table[z80.a]},n[112]=function(){tstates+=1;var n;tstates+=3;n=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[n]},n[113]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,0)},n[114]=function(){tstates+=7;var n=(z80.l|z80.h<<8)-z80.sp-(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|(z80.sp&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|2|overflow_sub_table[t>>4]|z80.h&168|halfcarry_sub_table[t&7]|(z80.l|z80.h<<8?0:64)},n[115]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.sp&255);n&=65535;writebyte(n,z80.sp>>8)},n[120]=function(){tstates+=1;tstates+=3;z80.a=readport(z80.c|z80.b<<8);z80.f=z80.f&1|sz53p_table[z80.a]},n[121]=function(){tstates+=1;tstates+=3;writeport(z80.c|z80.b<<8,z80.a)},n[122]=function(){tstates+=7;var n=(z80.l|z80.h<<8)+z80.sp+(z80.f&1),t=((z80.l|z80.h<<8)&34816)>>11|(z80.sp&34816)>>10|(n&34816)>>9;z80.h=n>>8&255;z80.l=n&255;z80.f=(n&65536?1:0)|overflow_add_table[t>>4]|z80.h&168|halfcarry_add_table[t&7]|(z80.l|z80.h<<8?0:64)},n[123]=function(){var n,t,i;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;t=readbyte(n++);n&=65535;i=readbyte(n);z80.sp=t|i<<8},n[160]=function(){var n=readbyte(z80.l|z80.h<<8),t,i,r;tstates+=8;t=(z80.c|z80.b<<8)-1&65535;z80.b=t>>8;z80.c=t&255;writebyte(z80.e|z80.d<<8,n);i=(z80.e|z80.d<<8)+1&65535;z80.d=i>>8;z80.e=i&255;r=(z80.l|z80.h<<8)+1&65535;z80.h=r>>8;z80.l=r&255;n=n+z80.a&255;z80.f=z80.f&193|(z80.c|z80.b<<8?4:0)|n&8|(n&2?32:0)},n[161]=function(){var r=readbyte(z80.l|z80.h<<8),n=z80.a-r&255,u=(z80.a&8)>>3|(r&8)>>2|(n&8)>>1,t,i;tstates+=8;t=(z80.l|z80.h<<8)+1&65535;z80.h=t>>8;z80.l=t&255;i=(z80.c|z80.b<<8)-1&65535;z80.b=i>>8;z80.c=i&255;z80.f=z80.f&1|(z80.c|z80.b<<8?6:2)|halfcarry_sub_table[u]|(n?0:64)|n&128;z80.f&16&&n--;z80.f|=n&8|(n&2?32:0)},n[162]=function(){var t=readport(z80.c|z80.b<<8),n;tstates+=5;tstates+=3;writebyte(z80.l|z80.h<<8,t);z80.b=z80.b-1&255;n=(z80.l|z80.h<<8)+1&65535;z80.h=n>>8;z80.l=n&255;z80.f=(t&128?2:0)|sz53_table[z80.b]},n[163]=function(){var t=readbyte(z80.l|z80.h<<8),n;z80.b=z80.b-1&255;tstates+=5;tstates+=3;n=(z80.l|z80.h<<8)+1&65535;z80.h=n>>8;z80.l=n&255;writeport(z80.c|z80.b<<8,t);z80.f=(t&128?2:0)|sz53_table[z80.b]},n[168]=function(){var n=readbyte(z80.l|z80.h<<8),t,i,r;tstates+=8;t=(z80.c|z80.b<<8)-1&65535;z80.b=t>>8;z80.c=t&255;writebyte(z80.e|z80.d<<8,n);i=(z80.e|z80.d<<8)-1&65535;z80.d=i>>8;z80.e=i&255;r=(z80.l|z80.h<<8)-1&65535;z80.h=r>>8;z80.l=r&255;n=n+z80.a&255;z80.f=z80.f&193|(z80.c|z80.b<<8?4:0)|n&8|(n&2?32:0)},n[169]=function(){var r=readbyte(z80.l|z80.h<<8),n=z80.a-r&255,u=(z80.a&8)>>3|(r&8)>>2|(n&8)>>1,t,i;tstates+=8;t=(z80.l|z80.h<<8)-1&65535;z80.h=t>>8;z80.l=t&255;i=(z80.c|z80.b<<8)-1&65535;z80.b=i>>8;z80.c=i&255;z80.f=z80.f&1|(z80.c|z80.b<<8?6:2)|halfcarry_sub_table[u]|(n?0:64)|n&128;z80.f&16&&n--;z80.f|=n&8|(n&2?32:0)},n[170]=function(){var t=readport(z80.c|z80.b<<8),n;tstates+=5;tstates+=3;writebyte(z80.l|z80.h<<8,t);z80.b=z80.b-1&255;n=(z80.l|z80.h<<8)-1&65535;z80.h=n>>8;z80.l=n&255;z80.f=(t&128?2:0)|sz53_table[z80.b]},n[171]=function(){var t=readbyte(z80.l|z80.h<<8),n;z80.b=z80.b-1&255;tstates+=5;tstates+=3;n=(z80.l|z80.h<<8)-1&65535;z80.h=n>>8;z80.l=n&255;writeport(z80.c|z80.b<<8,t);z80.f=(t&128?2:0)|sz53_table[z80.b]},n[176]=function(){var n=readbyte(z80.l|z80.h<<8),t,i,r;tstates+=8;writebyte(z80.e|z80.d<<8,n);t=(z80.l|z80.h<<8)+1&65535;z80.h=t>>8;z80.l=t&255;i=(z80.e|z80.d<<8)+1&65535;z80.d=i>>8;z80.e=i&255;r=(z80.c|z80.b<<8)-1&65535;z80.b=r>>8;z80.c=r&255;n=n+z80.a&255;z80.f=z80.f&193|(z80.c|z80.b<<8?4:0)|n&8|(n&2?32:0);z80.c|z80.b<<8&&(tstates+=5,z80.pc-=2)},n[177]=function(){var r=readbyte(z80.l|z80.h<<8),n=z80.a-r&255,u=(z80.a&8)>>3|(r&8)>>2|(n&8)>>1,t,i;tstates+=8;t=(z80.l|z80.h<<8)+1&65535;z80.h=t>>8;z80.l=t&255;i=(z80.c|z80.b<<8)-1&65535;z80.b=i>>8;z80.c=i&255;z80.f=z80.f&1|(z80.c|z80.b<<8?6:2)|halfcarry_sub_table[u]|(n?0:64)|n&128;z80.f&16&&n--;z80.f|=n&8|(n&2?32:0);(z80.f&68)==4&&(tstates+=5,z80.pc-=2)},n[178]=function(){var t=readport(z80.c|z80.b<<8),n;tstates+=5;tstates+=3;writebyte(z80.l|z80.h<<8,t);z80.b=z80.b-1&255;n=(z80.l|z80.h<<8)+1&65535;z80.h=n>>8;z80.l=n&255;z80.f=(t&128?2:0)|sz53_table[z80.b];z80.b&&(tstates+=5,z80.pc-=2)},n[179]=function(){var t=readbyte(z80.l|z80.h<<8),n;tstates+=5;z80.b=z80.b-1&255;n=(z80.l|z80.h<<8)+1&65535;z80.h=n>>8;z80.l=n&255;writeport(z80.c|z80.b<<8,t);z80.f=(t&128?2:0)|sz53_table[z80.b];z80.b?(tstates+=1,tstates+=7,z80.pc-=2):tstates+=3},n[184]=function(){var n=readbyte(z80.l|z80.h<<8),t,i,r;tstates+=8;writebyte(z80.e|z80.d<<8,n);t=(z80.l|z80.h<<8)-1&65535;z80.h=t>>8;z80.l=t&255;i=(z80.e|z80.d<<8)-1&65535;z80.d=i>>8;z80.e=i&255;r=(z80.c|z80.b<<8)-1&65535;z80.b=r>>8;z80.c=r&255;n=n+z80.a&255;z80.f=z80.f&193|(z80.c|z80.b<<8?4:0)|n&8|(n&2?32:0);z80.c|z80.b<<8&&(tstates+=5,z80.pc-=2)},n[185]=function(){var r=readbyte(z80.l|z80.h<<8),n=z80.a-r&255,u=(z80.a&8)>>3|(r&8)>>2|(n&8)>>1,t,i;tstates+=8;t=(z80.l|z80.h<<8)-1&65535;z80.h=t>>8;z80.l=t&255;i=(z80.c|z80.b<<8)-1&65535;z80.b=i>>8;z80.c=i&255;z80.f=z80.f&1|(z80.c|z80.b<<8?6:2)|halfcarry_sub_table[u]|(n?0:64)|n&128;z80.f&16&&n--;z80.f|=n&8|(n&2?32:0);(z80.f&68)==4&&(tstates+=5,z80.pc-=2)},n[186]=function(){var t=readport(z80.c|z80.b<<8),n;tstates+=5;tstates+=3;writebyte(z80.l|z80.h<<8,t);z80.b=z80.b-1&255;n=(z80.l|z80.h<<8)-1&65535;z80.h=n>>8;z80.l=n&255;z80.f=(t&128?2:0)|sz53_table[z80.b];z80.b&&(tstates+=5,z80.pc-=2)},n[187]=function(){var t=readbyte(z80.l|z80.h<<8),n;tstates+=5;z80.b=z80.b-1&255;n=(z80.l|z80.h<<8)-1&65535;z80.h=n>>8;z80.l=n&255;writeport(z80.c|z80.b<<8,t);z80.f=(t&128?2:0)|sz53_table[z80.b];z80.b?(tstates+=1,tstates+=7,z80.pc-=2):tstates+=3},n[256]=function(){},z80_defaults(n),n}();z80_cb_ops=function(){var n=[];return n[0]=function(){z80.b=(z80.b&127)<<1|z80.b>>7;z80.f=z80.b&1|sz53p_table[z80.b]},n[1]=function(){z80.c=(z80.c&127)<<1|z80.c>>7;z80.f=z80.c&1|sz53p_table[z80.c]},n[2]=function(){z80.d=(z80.d&127)<<1|z80.d>>7;z80.f=z80.d&1|sz53p_table[z80.d]},n[3]=function(){z80.e=(z80.e&127)<<1|z80.e>>7;z80.f=z80.e&1|sz53p_table[z80.e]},n[4]=function(){z80.h=(z80.h&127)<<1|z80.h>>7;z80.f=z80.h&1|sz53p_table[z80.h]},n[5]=function(){z80.l=(z80.l&127)<<1|z80.l>>7;z80.f=z80.l&1|sz53p_table[z80.l]},n[6]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=7;n=(n&127)<<1|n>>7;z80.f=n&1|sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[7]=function(){z80.a=(z80.a&127)<<1|z80.a>>7;z80.f=z80.a&1|sz53p_table[z80.a]},n[8]=function(){z80.f=z80.b&1;z80.b=z80.b>>1|(z80.b&1)<<7;z80.f|=sz53p_table[z80.b]},n[9]=function(){z80.f=z80.c&1;z80.c=z80.c>>1|(z80.c&1)<<7;z80.f|=sz53p_table[z80.c]},n[10]=function(){z80.f=z80.d&1;z80.d=z80.d>>1|(z80.d&1)<<7;z80.f|=sz53p_table[z80.d]},n[11]=function(){z80.f=z80.e&1;z80.e=z80.e>>1|(z80.e&1)<<7;z80.f|=sz53p_table[z80.e]},n[12]=function(){z80.f=z80.h&1;z80.h=z80.h>>1|(z80.h&1)<<7;z80.f|=sz53p_table[z80.h]},n[13]=function(){z80.f=z80.l&1;z80.l=z80.l>>1|(z80.l&1)<<7;z80.f|=sz53p_table[z80.l]},n[14]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=7;z80.f=n&1;n=n>>1|(n&1)<<7;z80.f|=sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[15]=function(){z80.f=z80.a&1;z80.a=z80.a>>1|(z80.a&1)<<7;z80.f|=sz53p_table[z80.a]},n[16]=function(){var n=z80.b;z80.b=(z80.b&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.b]},n[17]=function(){var n=z80.c;z80.c=(z80.c&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.c]},n[18]=function(){var n=z80.d;z80.d=(z80.d&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.d]},n[19]=function(){var n=z80.e;z80.e=(z80.e&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.e]},n[20]=function(){var n=z80.h;z80.h=(z80.h&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.h]},n[21]=function(){var n=z80.l;z80.l=(z80.l&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.l]},n[22]=function(){var n=readbyte(z80.l|z80.h<<8),t;tstates+=7;t=n;n=(n&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[23]=function(){var n=z80.a;z80.a=(z80.a&127)<<1|z80.f&1;z80.f=n>>7|sz53p_table[z80.a]},n[24]=function(){var n=z80.b;z80.b=z80.b>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.b]},n[25]=function(){var n=z80.c;z80.c=z80.c>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.c]},n[26]=function(){var n=z80.d;z80.d=z80.d>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.d]},n[27]=function(){var n=z80.e;z80.e=z80.e>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.e]},n[28]=function(){var n=z80.h;z80.h=z80.h>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.h]},n[29]=function(){var n=z80.l;z80.l=z80.l>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.l]},n[30]=function(){var n=readbyte(z80.l|z80.h<<8),t;tstates+=7;t=n;n=n>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[31]=function(){var n=z80.a;z80.a=z80.a>>1|(z80.f&1)<<7;z80.f=n&1|sz53p_table[z80.a]},n[32]=function(){z80.f=z80.b>>7;z80.b<<=1;z80.b&=255;z80.f|=sz53p_table[z80.b]},n[33]=function(){z80.f=z80.c>>7;z80.c<<=1;z80.c&=255;z80.f|=sz53p_table[z80.c]},n[34]=function(){z80.f=z80.d>>7;z80.d<<=1;z80.d&=255;z80.f|=sz53p_table[z80.d]},n[35]=function(){z80.f=z80.e>>7;z80.e<<=1;z80.e&=255;z80.f|=sz53p_table[z80.e]},n[36]=function(){z80.f=z80.h>>7;z80.h<<=1;z80.h&=255;z80.f|=sz53p_table[z80.h]},n[37]=function(){z80.f=z80.l>>7;z80.l<<=1;z80.l&=255;z80.f|=sz53p_table[z80.l]},n[38]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=7;z80.f=n>>7;n<<=1;n&=255;z80.f|=sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[39]=function(){z80.f=z80.a>>7;z80.a<<=1;z80.a&=255;z80.f|=sz53p_table[z80.a]},n[40]=function(){z80.f=z80.b&1;z80.b=z80.b&128|z80.b>>1;z80.f|=sz53p_table[z80.b]},n[41]=function(){z80.f=z80.c&1;z80.c=z80.c&128|z80.c>>1;z80.f|=sz53p_table[z80.c]},n[42]=function(){z80.f=z80.d&1;z80.d=z80.d&128|z80.d>>1;z80.f|=sz53p_table[z80.d]},n[43]=function(){z80.f=z80.e&1;z80.e=z80.e&128|z80.e>>1;z80.f|=sz53p_table[z80.e]},n[44]=function(){z80.f=z80.h&1;z80.h=z80.h&128|z80.h>>1;z80.f|=sz53p_table[z80.h]},n[45]=function(){z80.f=z80.l&1;z80.l=z80.l&128|z80.l>>1;z80.f|=sz53p_table[z80.l]},n[46]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=7;z80.f=n&1;n=n&128|n>>1;z80.f|=sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[47]=function(){z80.f=z80.a&1;z80.a=z80.a&128|z80.a>>1;z80.f|=sz53p_table[z80.a]},n[48]=function(){z80.f=z80.b>>7;z80.b=z80.b<<1|1;z80.b&=255;z80.f|=sz53p_table[z80.b]},n[49]=function(){z80.f=z80.c>>7;z80.c=z80.c<<1|1;z80.c&=255;z80.f|=sz53p_table[z80.c]},n[50]=function(){z80.f=z80.d>>7;z80.d=z80.d<<1|1;z80.d&=255;z80.f|=sz53p_table[z80.d]},n[51]=function(){z80.f=z80.e>>7;z80.e=z80.e<<1|1;z80.e&=255;z80.f|=sz53p_table[z80.e]},n[52]=function(){z80.f=z80.h>>7;z80.h=z80.h<<1|1;z80.h&=255;z80.f|=sz53p_table[z80.h]},n[53]=function(){z80.f=z80.l>>7;z80.l=z80.l<<1|1;z80.l&=255;z80.f|=sz53p_table[z80.l]},n[54]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=7;z80.f=n>>7;n=n<<1|1;n&=255;z80.f|=sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[55]=function(){z80.f=z80.a>>7;z80.a=z80.a<<1|1;z80.a&=255;z80.f|=sz53p_table[z80.a]},n[56]=function(){z80.f=z80.b&1;z80.b>>=1;z80.f|=sz53p_table[z80.b]},n[57]=function(){z80.f=z80.c&1;z80.c>>=1;z80.f|=sz53p_table[z80.c]},n[58]=function(){z80.f=z80.d&1;z80.d>>=1;z80.f|=sz53p_table[z80.d]},n[59]=function(){z80.f=z80.e&1;z80.e>>=1;z80.f|=sz53p_table[z80.e]},n[60]=function(){z80.f=z80.h&1;z80.h>>=1;z80.f|=sz53p_table[z80.h]},n[61]=function(){z80.f=z80.l&1;z80.l>>=1;z80.f|=sz53p_table[z80.l]},n[62]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=7;z80.f=n&1;n>>=1;z80.f|=sz53p_table[n];writebyte(z80.l|z80.h<<8,n)},n[63]=function(){z80.f=z80.a&1;z80.a>>=1;z80.f|=sz53p_table[z80.a]},n[64]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&1||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[65]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&1||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[66]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&1||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[67]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&1||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[68]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&1||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[69]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&1||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[70]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&1||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[71]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&1||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[72]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&2||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[73]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&2||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[74]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&2||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[75]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&2||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[76]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&2||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[77]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&2||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[78]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&2||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[79]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&2||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[80]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&4||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[81]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&4||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[82]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&4||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[83]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&4||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[84]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&4||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[85]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&4||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[86]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&4||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[87]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&4||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[88]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&8||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[89]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&8||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[90]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&8||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[91]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&8||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[92]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&8||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[93]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&8||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[94]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&8||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[95]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&8||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[96]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&16||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[97]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&16||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[98]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&16||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[99]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&16||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[100]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&16||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[101]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&16||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[102]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&16||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[103]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&16||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[104]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&32||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[105]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&32||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[106]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&32||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[107]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&32||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[108]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&32||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[109]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&32||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[110]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&32||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[111]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&32||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[112]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&64||(z80.f|=68);!1&&z80.b&128&&(z80.f|=128)},n[113]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&64||(z80.f|=68);!1&&z80.c&128&&(z80.f|=128)},n[114]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&64||(z80.f|=68);!1&&z80.d&128&&(z80.f|=128)},n[115]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&64||(z80.f|=68);!1&&z80.e&128&&(z80.f|=128)},n[116]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&64||(z80.f|=68);!1&&z80.h&128&&(z80.f|=128)},n[117]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&64||(z80.f|=68);!1&&z80.l&128&&(z80.f|=128)},n[118]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&64||(z80.f|=68);!1&&n&128&&(z80.f|=128)},n[119]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&64||(z80.f|=68);!1&&z80.a&128&&(z80.f|=128)},n[120]=function(){z80.f=z80.f&1|16|z80.b&40;z80.b&128||(z80.f|=68);!0&&z80.b&128&&(z80.f|=128)},n[121]=function(){z80.f=z80.f&1|16|z80.c&40;z80.c&128||(z80.f|=68);!0&&z80.c&128&&(z80.f|=128)},n[122]=function(){z80.f=z80.f&1|16|z80.d&40;z80.d&128||(z80.f|=68);!0&&z80.d&128&&(z80.f|=128)},n[123]=function(){z80.f=z80.f&1|16|z80.e&40;z80.e&128||(z80.f|=68);!0&&z80.e&128&&(z80.f|=128)},n[124]=function(){z80.f=z80.f&1|16|z80.h&40;z80.h&128||(z80.f|=68);!0&&z80.h&128&&(z80.f|=128)},n[125]=function(){z80.f=z80.f&1|16|z80.l&40;z80.l&128||(z80.f|=68);!0&&z80.l&128&&(z80.f|=128)},n[126]=function(){var n=readbyte(z80.l|z80.h<<8);tstates+=4;z80.f=z80.f&1|16|n&40;n&128||(z80.f|=68);!0&&n&128&&(z80.f|=128)},n[127]=function(){z80.f=z80.f&1|16|z80.a&40;z80.a&128||(z80.f|=68);!0&&z80.a&128&&(z80.f|=128)},n[128]=function(){z80.b&=254},n[129]=function(){z80.c&=254},n[130]=function(){z80.d&=254},n[131]=function(){z80.e&=254},n[132]=function(){z80.h&=254},n[133]=function(){z80.l&=254},n[134]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&254)},n[135]=function(){z80.a&=254},n[136]=function(){z80.b&=253},n[137]=function(){z80.c&=253},n[138]=function(){z80.d&=253},n[139]=function(){z80.e&=253},n[140]=function(){z80.h&=253},n[141]=function(){z80.l&=253},n[142]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&253)},n[143]=function(){z80.a&=253},n[144]=function(){z80.b&=251},n[145]=function(){z80.c&=251},n[146]=function(){z80.d&=251},n[147]=function(){z80.e&=251},n[148]=function(){z80.h&=251},n[149]=function(){z80.l&=251},n[150]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&251)},n[151]=function(){z80.a&=251},n[152]=function(){z80.b&=247},n[153]=function(){z80.c&=247},n[154]=function(){z80.d&=247},n[155]=function(){z80.e&=247},n[156]=function(){z80.h&=247},n[157]=function(){z80.l&=247},n[158]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&247)},n[159]=function(){z80.a&=247},n[160]=function(){z80.b&=239},n[161]=function(){z80.c&=239},n[162]=function(){z80.d&=239},n[163]=function(){z80.e&=239},n[164]=function(){z80.h&=239},n[165]=function(){z80.l&=239},n[166]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&239)},n[167]=function(){z80.a&=239},n[168]=function(){z80.b&=223},n[169]=function(){z80.c&=223},n[170]=function(){z80.d&=223},n[171]=function(){z80.e&=223},n[172]=function(){z80.h&=223},n[173]=function(){z80.l&=223},n[174]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&223)},n[175]=function(){z80.a&=223},n[176]=function(){z80.b&=191},n[177]=function(){z80.c&=191},n[178]=function(){z80.d&=191},n[179]=function(){z80.e&=191},n[180]=function(){z80.h&=191},n[181]=function(){z80.l&=191},n[182]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&191)},n[183]=function(){z80.a&=191},n[184]=function(){z80.b&=127},n[185]=function(){z80.c&=127},n[186]=function(){z80.d&=127},n[187]=function(){z80.e&=127},n[188]=function(){z80.h&=127},n[189]=function(){z80.l&=127},n[190]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)&127)},n[191]=function(){z80.a&=127},n[192]=function(){z80.b|=1},n[193]=function(){z80.c|=1},n[194]=function(){z80.d|=1},n[195]=function(){z80.e|=1},n[196]=function(){z80.h|=1},n[197]=function(){z80.l|=1},n[198]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|1)},n[199]=function(){z80.a|=1},n[200]=function(){z80.b|=2},n[201]=function(){z80.c|=2},n[202]=function(){z80.d|=2},n[203]=function(){z80.e|=2},n[204]=function(){z80.h|=2},n[205]=function(){z80.l|=2},n[206]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|2)},n[207]=function(){z80.a|=2},n[208]=function(){z80.b|=4},n[209]=function(){z80.c|=4},n[210]=function(){z80.d|=4},n[211]=function(){z80.e|=4},n[212]=function(){z80.h|=4},n[213]=function(){z80.l|=4},n[214]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|4)},n[215]=function(){z80.a|=4},n[216]=function(){z80.b|=8},n[217]=function(){z80.c|=8},n[218]=function(){z80.d|=8},n[219]=function(){z80.e|=8},n[220]=function(){z80.h|=8},n[221]=function(){z80.l|=8},n[222]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|8)},n[223]=function(){z80.a|=8},n[224]=function(){z80.b|=16},n[225]=function(){z80.c|=16},n[226]=function(){z80.d|=16},n[227]=function(){z80.e|=16},n[228]=function(){z80.h|=16},n[229]=function(){z80.l|=16},n[230]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|16)},n[231]=function(){z80.a|=16},n[232]=function(){z80.b|=32},n[233]=function(){z80.c|=32},n[234]=function(){z80.d|=32},n[235]=function(){z80.e|=32},n[236]=function(){z80.h|=32},n[237]=function(){z80.l|=32},n[238]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|32)},n[239]=function(){z80.a|=32},n[240]=function(){z80.b|=64},n[241]=function(){z80.c|=64},n[242]=function(){z80.d|=64},n[243]=function(){z80.e|=64},n[244]=function(){z80.h|=64},n[245]=function(){z80.l|=64},n[246]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|64)},n[247]=function(){z80.a|=64},n[248]=function(){z80.b|=128},n[249]=function(){z80.c|=128},n[250]=function(){z80.d|=128},n[251]=function(){z80.e|=128},n[252]=function(){z80.h|=128},n[253]=function(){z80.l|=128},n[254]=function(){tstates+=7;writebyte(z80.l|z80.h<<8,readbyte(z80.l|z80.h<<8)|128)},n[255]=function(){z80.a|=128},n[256]=function(){},z80_defaults(n),n}();z80_dd_ops=function(){var n=[];return n[9]=function(){var n=(z80.ixl|z80.ixh<<8)+(z80.c|z80.b<<8),t=((z80.ixl|z80.ixh<<8)&2048)>>11|((z80.c|z80.b<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.ixh=n>>8&255;z80.ixl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[25]=function(){var n=(z80.ixl|z80.ixh<<8)+(z80.e|z80.d<<8),t=((z80.ixl|z80.ixh<<8)&2048)>>11|((z80.e|z80.d<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.ixh=n>>8&255;z80.ixl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[33]=function(){tstates+=6;z80.ixl=readbyte(z80.pc++);z80.pc&=65535;z80.ixh=readbyte(z80.pc++);z80.pc&=65535},n[34]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.ixl);n&=65535;writebyte(n,z80.ixh)},n[35]=function(){tstates+=2;var n=(z80.ixl|z80.ixh<<8)+1&65535;z80.ixh=n>>8;z80.ixl=n&255},n[36]=function(){z80.ixh=z80.ixh+1&255;z80.f=z80.f&1|(z80.ixh==128?4:0)|(z80.ixh&15?0:16)|sz53_table[z80.ixh]},n[37]=function(){z80.f=z80.f&1|(z80.ixh&15?0:16)|2;z80.ixh=z80.ixh-1&255;z80.f|=(z80.ixh==127?4:0)|sz53_table[z80.ixh]},n[38]=function(){tstates+=3;z80.ixh=readbyte(z80.pc++);z80.pc&=65535},n[41]=function(){var n=(z80.ixl|z80.ixh<<8)+(z80.ixl|z80.ixh<<8),t=((z80.ixl|z80.ixh<<8)&2048)>>11|((z80.ixl|z80.ixh<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.ixh=n>>8&255;z80.ixl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[42]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.ixl=readbyte(n++);n&=65535;z80.ixh=readbyte(n)},n[43]=function(){tstates+=2;var n=(z80.ixl|z80.ixh<<8)-1&65535;z80.ixh=n>>8;z80.ixl=n&255},n[44]=function(){z80.ixl=z80.ixl+1&255;z80.f=z80.f&1|(z80.ixl==128?4:0)|(z80.ixl&15?0:16)|sz53_table[z80.ixl]},n[45]=function(){z80.f=z80.f&1|(z80.ixl&15?0:16)|2;z80.ixl=z80.ixl-1&255;z80.f|=(z80.ixl==127?4:0)|sz53_table[z80.ixl]},n[46]=function(){tstates+=3;z80.ixl=readbyte(z80.pc++);z80.pc&=65535},n[52]=function(){var t,n;tstates+=15;t=(z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535;z80.pc&=65535;n=readbyte(t);n=n+1&255;z80.f=z80.f&1|(n==128?4:0)|(n&15?0:16)|sz53_table[n];writebyte(t,n)},n[53]=function(){var t,n;tstates+=15;t=(z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535;z80.pc&=65535;n=readbyte(t);z80.f=z80.f&1|(n&15?0:16)|2;n=n-1&255;z80.f|=(n==127?4:0)|sz53_table[n];writebyte(t,n)},n[54]=function(){tstates+=11;var n=(z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535;z80.pc&=65535;writebyte(n,readbyte(z80.pc++));z80.pc&=65535},n[57]=function(){var n=(z80.ixl|z80.ixh<<8)+z80.sp,t=((z80.ixl|z80.ixh<<8)&2048)>>11|(z80.sp&2048)>>10|(n&2048)>>9;tstates+=7;z80.ixh=n>>8&255;z80.ixl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[68]=function(){z80.b=z80.ixh},n[69]=function(){z80.b=z80.ixl},n[70]=function(){tstates+=11;z80.b=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[76]=function(){z80.c=z80.ixh},n[77]=function(){z80.c=z80.ixl},n[78]=function(){tstates+=11;z80.c=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[84]=function(){z80.d=z80.ixh},n[85]=function(){z80.d=z80.ixl},n[86]=function(){tstates+=11;z80.d=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[92]=function(){z80.e=z80.ixh},n[93]=function(){z80.e=z80.ixl},n[94]=function(){tstates+=11;z80.e=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[96]=function(){z80.ixh=z80.b},n[97]=function(){z80.ixh=z80.c},n[98]=function(){z80.ixh=z80.d},n[99]=function(){z80.ixh=z80.e},n[100]=function(){},n[101]=function(){z80.ixh=z80.ixl},n[102]=function(){tstates+=11;z80.h=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[103]=function(){z80.ixh=z80.a},n[104]=function(){z80.ixl=z80.b},n[105]=function(){z80.ixl=z80.c},n[106]=function(){z80.ixl=z80.d},n[107]=function(){z80.ixl=z80.e},n[108]=function(){z80.ixl=z80.ixh},n[109]=function(){},n[110]=function(){tstates+=11;z80.l=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[111]=function(){z80.ixl=z80.a},n[112]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.b);z80.pc&=65535},n[113]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.c);z80.pc&=65535},n[114]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.d);z80.pc&=65535},n[115]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.e);z80.pc&=65535},n[116]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.h);z80.pc&=65535},n[117]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.l);z80.pc&=65535},n[119]=function(){tstates+=11;writebyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.a);z80.pc&=65535},n[124]=function(){z80.a=z80.ixh},n[125]=function(){z80.a=z80.ixl},n[126]=function(){tstates+=11;z80.a=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[132]=function(){var n=z80.a+z80.ixh,t=(z80.a&136)>>3|(z80.ixh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[133]=function(){var n=z80.a+z80.ixl,t=(z80.a&136)>>3|(z80.ixl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[134]=function(){var t,n,i;tstates+=11;t=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a+t;i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[140]=function(){var n=z80.a+z80.ixh+(z80.f&1),t=(z80.a&136)>>3|(z80.ixh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[141]=function(){var n=z80.a+z80.ixl+(z80.f&1),t=(z80.a&136)>>3|(z80.ixl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[142]=function(){var t,n,i;tstates+=11;t=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a+t+(z80.f&1);i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[148]=function(){var n=z80.a-z80.ixh,t=(z80.a&136)>>3|(z80.ixh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[149]=function(){var n=z80.a-z80.ixl,t=(z80.a&136)>>3|(z80.ixl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[150]=function(){var t,n,i;tstates+=11;t=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a-t;i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[156]=function(){var n=z80.a-z80.ixh-(z80.f&1),t=(z80.a&136)>>3|(z80.ixh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[157]=function(){var n=z80.a-z80.ixl-(z80.f&1),t=(z80.a&136)>>3|(z80.ixl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[158]=function(){var t,n,i;tstates+=11;t=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a-t-(z80.f&1);i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[164]=function(){z80.a&=z80.ixh;z80.f=16|sz53p_table[z80.a]},n[165]=function(){z80.a&=z80.ixl;z80.f=16|sz53p_table[z80.a]},n[166]=function(){tstates+=11;var n=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;z80.a&=n;z80.f=16|sz53p_table[z80.a]},n[172]=function(){z80.a^=z80.ixh;z80.f=sz53p_table[z80.a]},n[173]=function(){z80.a^=z80.ixl;z80.f=sz53p_table[z80.a]},n[174]=function(){tstates+=11;var n=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;z80.a^=n;z80.f=sz53p_table[z80.a]},n[180]=function(){z80.a|=z80.ixh;z80.f=sz53p_table[z80.a]},n[181]=function(){z80.a|=z80.ixl;z80.f=sz53p_table[z80.a]},n[182]=function(){tstates+=11;var n=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;z80.a|=n;z80.f=sz53p_table[z80.a]},n[188]=function(){var n=z80.a-z80.ixh,t=(z80.a&136)>>3|(z80.ixh&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.ixh&40|n&128},n[189]=function(){var n=z80.a-z80.ixl,t=(z80.a&136)>>3|(z80.ixl&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.ixl&40|n&128},n[190]=function(){var t,n,i;tstates+=11;t=readbyte((z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a-t;i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|t&40|n&128},n[203]=function(n){var t;tstates+=7;n=(z80.ixl|z80.ixh<<8)+sign_extend(readbyte(z80.pc++));z80.pc&=65535;t=readbyte(z80.pc++);z80.pc&=65535;z80_ddfdcbxx(t,n)},n[225]=function(){tstates+=6;z80.ixl=readbyte(z80.sp++);z80.sp&=65535;z80.ixh=readbyte(z80.sp++);z80.sp&=65535},n[227]=function(){var n=readbyte(z80.sp),t=readbyte(z80.sp+1);tstates+=15;writebyte(z80.sp+1,z80.ixh);writebyte(z80.sp,z80.ixl);z80.ixl=n;z80.ixh=t},n[229]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.ixh);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.ixl)},n[233]=function(){z80.pc=z80.ixl|z80.ixh<<8},n[249]=function(){tstates+=2;z80.sp=z80.ixl|z80.ixh<<8},n[256]=function(){z80.pc--;z80.pc&=65535;z80.r--;z80.r&=127},z80_defaults(n),n}();z80_fd_ops=function(){var n=[];return n[9]=function(){var n=(z80.iyl|z80.iyh<<8)+(z80.c|z80.b<<8),t=((z80.iyl|z80.iyh<<8)&2048)>>11|((z80.c|z80.b<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.iyh=n>>8&255;z80.iyl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[25]=function(){var n=(z80.iyl|z80.iyh<<8)+(z80.e|z80.d<<8),t=((z80.iyl|z80.iyh<<8)&2048)>>11|((z80.e|z80.d<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.iyh=n>>8&255;z80.iyl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[33]=function(){tstates+=6;z80.iyl=readbyte(z80.pc++);z80.pc&=65535;z80.iyh=readbyte(z80.pc++);z80.pc&=65535},n[34]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;writebyte(n++,z80.iyl);n&=65535;writebyte(n,z80.iyh)},n[35]=function(){tstates+=2;var n=(z80.iyl|z80.iyh<<8)+1&65535;z80.iyh=n>>8;z80.iyl=n&255},n[36]=function(){z80.iyh=z80.iyh+1&255;z80.f=z80.f&1|(z80.iyh==128?4:0)|(z80.iyh&15?0:16)|sz53_table[z80.iyh]},n[37]=function(){z80.f=z80.f&1|(z80.iyh&15?0:16)|2;z80.iyh=z80.iyh-1&255;z80.f|=(z80.iyh==127?4:0)|sz53_table[z80.iyh]},n[38]=function(){tstates+=3;z80.iyh=readbyte(z80.pc++);z80.pc&=65535},n[41]=function(){var n=(z80.iyl|z80.iyh<<8)+(z80.iyl|z80.iyh<<8),t=((z80.iyl|z80.iyh<<8)&2048)>>11|((z80.iyl|z80.iyh<<8)&2048)>>10|(n&2048)>>9;tstates+=7;z80.iyh=n>>8&255;z80.iyl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[42]=function(){var n;tstates+=12;n=readbyte(z80.pc++);z80.pc&=65535;n|=readbyte(z80.pc++)<<8;z80.pc&=65535;z80.iyl=readbyte(n++);n&=65535;z80.iyh=readbyte(n)},n[43]=function(){tstates+=2;var n=(z80.iyl|z80.iyh<<8)-1&65535;z80.iyh=n>>8;z80.iyl=n&255},n[44]=function(){z80.iyl=z80.iyl+1&255;z80.f=z80.f&1|(z80.iyl==128?4:0)|(z80.iyl&15?0:16)|sz53_table[z80.iyl]},n[45]=function(){z80.f=z80.f&1|(z80.iyl&15?0:16)|2;z80.iyl=z80.iyl-1&255;z80.f|=(z80.iyl==127?4:0)|sz53_table[z80.iyl]},n[46]=function(){tstates+=3;z80.iyl=readbyte(z80.pc++);z80.pc&=65535},n[52]=function(){var t,n;tstates+=15;t=(z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535;z80.pc&=65535;n=readbyte(t);n=n+1&255;z80.f=z80.f&1|(n==128?4:0)|(n&15?0:16)|sz53_table[n];writebyte(t,n)},n[53]=function(){var t,n;tstates+=15;t=(z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535;z80.pc&=65535;n=readbyte(t);z80.f=z80.f&1|(n&15?0:16)|2;n=n-1&255;z80.f|=(n==127?4:0)|sz53_table[n];writebyte(t,n)},n[54]=function(){tstates+=11;var n=(z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535;z80.pc&=65535;writebyte(n,readbyte(z80.pc++));z80.pc&=65535},n[57]=function(){var n=(z80.iyl|z80.iyh<<8)+z80.sp,t=((z80.iyl|z80.iyh<<8)&2048)>>11|(z80.sp&2048)>>10|(n&2048)>>9;tstates+=7;z80.iyh=n>>8&255;z80.iyl=n&255;z80.f=z80.f&196|(n&65536?1:0)|n>>8&40|halfcarry_add_table[t]},n[68]=function(){z80.b=z80.iyh},n[69]=function(){z80.b=z80.iyl},n[70]=function(){tstates+=11;z80.b=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[76]=function(){z80.c=z80.iyh},n[77]=function(){z80.c=z80.iyl},n[78]=function(){tstates+=11;z80.c=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[84]=function(){z80.d=z80.iyh},n[85]=function(){z80.d=z80.iyl},n[86]=function(){tstates+=11;z80.d=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[92]=function(){z80.e=z80.iyh},n[93]=function(){z80.e=z80.iyl},n[94]=function(){tstates+=11;z80.e=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[96]=function(){z80.iyh=z80.b},n[97]=function(){z80.iyh=z80.c},n[98]=function(){z80.iyh=z80.d},n[99]=function(){z80.iyh=z80.e},n[100]=function(){},n[101]=function(){z80.iyh=z80.iyl},n[102]=function(){tstates+=11;z80.h=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[103]=function(){z80.iyh=z80.a},n[104]=function(){z80.iyl=z80.b},n[105]=function(){z80.iyl=z80.c},n[106]=function(){z80.iyl=z80.d},n[107]=function(){z80.iyl=z80.e},n[108]=function(){z80.iyl=z80.iyh},n[109]=function(){},n[110]=function(){tstates+=11;z80.l=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[111]=function(){z80.iyl=z80.a},n[112]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.b);z80.pc&=65535},n[113]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.c);z80.pc&=65535},n[114]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.d);z80.pc&=65535},n[115]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.e);z80.pc&=65535},n[116]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.h);z80.pc&=65535},n[117]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.l);z80.pc&=65535},n[119]=function(){tstates+=11;writebyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535,z80.a);z80.pc&=65535},n[124]=function(){z80.a=z80.iyh},n[125]=function(){z80.a=z80.iyl},n[126]=function(){tstates+=11;z80.a=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535},n[132]=function(){var n=z80.a+z80.iyh,t=(z80.a&136)>>3|(z80.iyh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[133]=function(){var n=z80.a+z80.iyl,t=(z80.a&136)>>3|(z80.iyl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[134]=function(){var t,n,i;tstates+=11;t=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a+t;i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[140]=function(){var n=z80.a+z80.iyh+(z80.f&1),t=(z80.a&136)>>3|(z80.iyh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[141]=function(){var n=z80.a+z80.iyl+(z80.f&1),t=(z80.a&136)>>3|(z80.iyl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[t&7]|overflow_add_table[t>>4]|sz53_table[z80.a]},n[142]=function(){var t,n,i;tstates+=11;t=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a+t+(z80.f&1);i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|halfcarry_add_table[i&7]|overflow_add_table[i>>4]|sz53_table[z80.a]},n[148]=function(){var n=z80.a-z80.iyh,t=(z80.a&136)>>3|(z80.iyh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[149]=function(){var n=z80.a-z80.iyl,t=(z80.a&136)>>3|(z80.iyl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[150]=function(){var t,n,i;tstates+=11;t=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a-t;i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[156]=function(){var n=z80.a-z80.iyh-(z80.f&1),t=(z80.a&136)>>3|(z80.iyh&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[157]=function(){var n=z80.a-z80.iyl-(z80.f&1),t=(z80.a&136)>>3|(z80.iyl&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|sz53_table[z80.a]},n[158]=function(){var t,n,i;tstates+=11;t=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a-t-(z80.f&1);i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.a=n&255;z80.f=(n&256?1:0)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|sz53_table[z80.a]},n[164]=function(){z80.a&=z80.iyh;z80.f=16|sz53p_table[z80.a]},n[165]=function(){z80.a&=z80.iyl;z80.f=16|sz53p_table[z80.a]},n[166]=function(){tstates+=11;var n=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;z80.a&=n;z80.f=16|sz53p_table[z80.a]},n[172]=function(){z80.a^=z80.iyh;z80.f=sz53p_table[z80.a]},n[173]=function(){z80.a^=z80.iyl;z80.f=sz53p_table[z80.a]},n[174]=function(){tstates+=11;var n=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;z80.a^=n;z80.f=sz53p_table[z80.a]},n[180]=function(){z80.a|=z80.iyh;z80.f=sz53p_table[z80.a]},n[181]=function(){z80.a|=z80.iyl;z80.f=sz53p_table[z80.a]},n[182]=function(){tstates+=11;var n=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;z80.a|=n;z80.f=sz53p_table[z80.a]},n[188]=function(){var n=z80.a-z80.iyh,t=(z80.a&136)>>3|(z80.iyh&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.iyh&40|n&128},n[189]=function(){var n=z80.a-z80.iyl,t=(z80.a&136)>>3|(z80.iyl&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[t&7]|overflow_sub_table[t>>4]|z80.iyl&40|n&128},n[190]=function(){var t,n,i;tstates+=11;t=readbyte((z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++))&65535);z80.pc&=65535;n=z80.a-t;i=(z80.a&136)>>3|(t&136)>>2|(n&136)>>1;z80.f=(n&256?1:n?0:64)|2|halfcarry_sub_table[i&7]|overflow_sub_table[i>>4]|t&40|n&128},n[203]=function(n){var t;tstates+=7;n=(z80.iyl|z80.iyh<<8)+sign_extend(readbyte(z80.pc++));z80.pc&=65535;t=readbyte(z80.pc++);z80.pc&=65535;z80_ddfdcbxx(t,n)},n[225]=function(){tstates+=6;z80.iyl=readbyte(z80.sp++);z80.sp&=65535;z80.iyh=readbyte(z80.sp++);z80.sp&=65535},n[227]=function(){var n=readbyte(z80.sp),t=readbyte(z80.sp+1);tstates+=15;writebyte(z80.sp+1,z80.iyh);writebyte(z80.sp,z80.iyl);z80.iyl=n;z80.iyh=t},n[229]=function(){tstates++;tstates+=6;z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.iyh);z80.sp--;z80.sp&=65535;writebyte(z80.sp,z80.iyl)},n[233]=function(){z80.pc=z80.iyl|z80.iyh<<8},n[249]=function(){tstates+=2;z80.sp=z80.iyl|z80.iyh<<8},n[256]=function(){z80.pc--;z80.pc&=65535;z80.r--;z80.r&=127},z80_defaults(n),n}();z80_ddfdcb_ops=function(){var n=[];return n[0]=function(n){tstates+=8;z80.b=readbyte(n);z80.b=(z80.b&127)<<1|z80.b>>7;z80.f=z80.b&1|sz53p_table[z80.b];writebyte(n,z80.b)},n[1]=function(n){tstates+=8;z80.c=readbyte(n);z80.c=(z80.c&127)<<1|z80.c>>7;z80.f=z80.c&1|sz53p_table[z80.c];writebyte(n,z80.c)},n[2]=function(n){tstates+=8;z80.d=readbyte(n);z80.d=(z80.d&127)<<1|z80.d>>7;z80.f=z80.d&1|sz53p_table[z80.d];writebyte(n,z80.d)},n[3]=function(n){tstates+=8;z80.e=readbyte(n);z80.e=(z80.e&127)<<1|z80.e>>7;z80.f=z80.e&1|sz53p_table[z80.e];writebyte(n,z80.e)},n[4]=function(n){tstates+=8;z80.h=readbyte(n);z80.h=(z80.h&127)<<1|z80.h>>7;z80.f=z80.h&1|sz53p_table[z80.h];writebyte(n,z80.h)},n[5]=function(n){tstates+=8;z80.l=readbyte(n);z80.l=(z80.l&127)<<1|z80.l>>7;z80.f=z80.l&1|sz53p_table[z80.l];writebyte(n,z80.l)},n[6]=function(n){tstates+=8;var t=readbyte(n);t=(t&127)<<1|t>>7;z80.f=t&1|sz53p_table[t];writebyte(n,t)},n[7]=function(n){tstates+=8;z80.a=readbyte(n);z80.a=(z80.a&127)<<1|z80.a>>7;z80.f=z80.a&1|sz53p_table[z80.a];writebyte(n,z80.a)},n[8]=function(n){tstates+=8;z80.b=readbyte(n);z80.f=z80.b&1;z80.b=z80.b>>1|(z80.b&1)<<7;z80.f|=sz53p_table[z80.b];writebyte(n,z80.b)},n[9]=function(n){tstates+=8;z80.c=readbyte(n);z80.f=z80.c&1;z80.c=z80.c>>1|(z80.c&1)<<7;z80.f|=sz53p_table[z80.c];writebyte(n,z80.c)},n[10]=function(n){tstates+=8;z80.d=readbyte(n);z80.f=z80.d&1;z80.d=z80.d>>1|(z80.d&1)<<7;z80.f|=sz53p_table[z80.d];writebyte(n,z80.d)},n[11]=function(n){tstates+=8;z80.e=readbyte(n);z80.f=z80.e&1;z80.e=z80.e>>1|(z80.e&1)<<7;z80.f|=sz53p_table[z80.e];writebyte(n,z80.e)},n[12]=function(n){tstates+=8;z80.h=readbyte(n);z80.f=z80.h&1;z80.h=z80.h>>1|(z80.h&1)<<7;z80.f|=sz53p_table[z80.h];writebyte(n,z80.h)},n[13]=function(n){tstates+=8;z80.l=readbyte(n);z80.f=z80.l&1;z80.l=z80.l>>1|(z80.l&1)<<7;z80.f|=sz53p_table[z80.l];writebyte(n,z80.l)},n[14]=function(n){tstates+=8;var t=readbyte(n);z80.f=t&1;t=t>>1|(t&1)<<7;z80.f|=sz53p_table[t];writebyte(n,t)},n[15]=function(n){tstates+=8;z80.a=readbyte(n);z80.f=z80.a&1;z80.a=z80.a>>1|(z80.a&1)<<7;z80.f|=sz53p_table[z80.a];writebyte(n,z80.a)},n[16]=function(n){tstates+=8;z80.b=readbyte(n);var t=z80.b;z80.b=(z80.b&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.b];writebyte(n,z80.b)},n[17]=function(n){tstates+=8;z80.c=readbyte(n);var t=z80.c;z80.c=(z80.c&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.c];writebyte(n,z80.c)},n[18]=function(n){tstates+=8;z80.d=readbyte(n);var t=z80.d;z80.d=(z80.d&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.d];writebyte(n,z80.d)},n[19]=function(n){tstates+=8;z80.e=readbyte(n);var t=z80.e;z80.e=(z80.e&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.e];writebyte(n,z80.e)},n[20]=function(n){tstates+=8;z80.h=readbyte(n);var t=z80.h;z80.h=(z80.h&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.h];writebyte(n,z80.h)},n[21]=function(n){tstates+=8;z80.l=readbyte(n);var t=z80.l;z80.l=(z80.l&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.l];writebyte(n,z80.l)},n[22]=function(n){tstates+=8;var t=readbyte(n),i=t;t=(t&127)<<1|z80.f&1;z80.f=i>>7|sz53p_table[t];writebyte(n,t)},n[23]=function(n){tstates+=8;z80.a=readbyte(n);var t=z80.a;z80.a=(z80.a&127)<<1|z80.f&1;z80.f=t>>7|sz53p_table[z80.a];writebyte(n,z80.a)},n[24]=function(n){tstates+=8;z80.b=readbyte(n);var t=z80.b;z80.b=z80.b>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.b];writebyte(n,z80.b)},n[25]=function(n){tstates+=8;z80.c=readbyte(n);var t=z80.c;z80.c=z80.c>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.c];writebyte(n,z80.c)},n[26]=function(n){tstates+=8;z80.d=readbyte(n);var t=z80.d;z80.d=z80.d>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.d];writebyte(n,z80.d)},n[27]=function(n){tstates+=8;z80.e=readbyte(n);var t=z80.e;z80.e=z80.e>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.e];writebyte(n,z80.e)},n[28]=function(n){tstates+=8;z80.h=readbyte(n);var t=z80.h;z80.h=z80.h>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.h];writebyte(n,z80.h)},n[29]=function(n){tstates+=8;z80.l=readbyte(n);var t=z80.l;z80.l=z80.l>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.l];writebyte(n,z80.l)},n[30]=function(n){tstates+=8;var t=readbyte(n),i=t;t=t>>1|(z80.f&1)<<7;z80.f=i&1|sz53p_table[t];writebyte(n,t)},n[31]=function(n){tstates+=8;z80.a=readbyte(n);var t=z80.a;z80.a=z80.a>>1|(z80.f&1)<<7;z80.f=t&1|sz53p_table[z80.a];writebyte(n,z80.a)},n[32]=function(n){tstates+=8;z80.b=readbyte(n);z80.f=z80.b>>7;z80.b<<=1;z80.b&=255;z80.f|=sz53p_table[z80.b];writebyte(n,z80.b)},n[33]=function(n){tstates+=8;z80.c=readbyte(n);z80.f=z80.c>>7;z80.c<<=1;z80.c&=255;z80.f|=sz53p_table[z80.c];writebyte(n,z80.c)},n[34]=function(n){tstates+=8;z80.d=readbyte(n);z80.f=z80.d>>7;z80.d<<=1;z80.d&=255;z80.f|=sz53p_table[z80.d];writebyte(n,z80.d)},n[35]=function(n){tstates+=8;z80.e=readbyte(n);z80.f=z80.e>>7;z80.e<<=1;z80.e&=255;z80.f|=sz53p_table[z80.e];writebyte(n,z80.e)},n[36]=function(n){tstates+=8;z80.h=readbyte(n);z80.f=z80.h>>7;z80.h<<=1;z80.h&=255;z80.f|=sz53p_table[z80.h];writebyte(n,z80.h)},n[37]=function(n){tstates+=8;z80.l=readbyte(n);z80.f=z80.l>>7;z80.l<<=1;z80.l&=255;z80.f|=sz53p_table[z80.l];writebyte(n,z80.l)},n[38]=function(n){tstates+=8;var t=readbyte(n);z80.f=t>>7;t<<=1;t&=255;z80.f|=sz53p_table[t];writebyte(n,t)},n[39]=function(n){tstates+=8;z80.a=readbyte(n);z80.f=z80.a>>7;z80.a<<=1;z80.a&=255;z80.f|=sz53p_table[z80.a];writebyte(n,z80.a)},n[40]=function(n){tstates+=8;z80.b=readbyte(n);z80.f=z80.b&1;z80.b=z80.b&128|z80.b>>1;z80.f|=sz53p_table[z80.b];writebyte(n,z80.b)},n[41]=function(n){tstates+=8;z80.c=readbyte(n);z80.f=z80.c&1;z80.c=z80.c&128|z80.c>>1;z80.f|=sz53p_table[z80.c];writebyte(n,z80.c)},n[42]=function(n){tstates+=8;z80.d=readbyte(n);z80.f=z80.d&1;z80.d=z80.d&128|z80.d>>1;z80.f|=sz53p_table[z80.d];writebyte(n,z80.d)},n[43]=function(n){tstates+=8;z80.e=readbyte(n);z80.f=z80.e&1;z80.e=z80.e&128|z80.e>>1;z80.f|=sz53p_table[z80.e];writebyte(n,z80.e)},n[44]=function(n){tstates+=8;z80.h=readbyte(n);z80.f=z80.h&1;z80.h=z80.h&128|z80.h>>1;z80.f|=sz53p_table[z80.h];writebyte(n,z80.h)},n[45]=function(n){tstates+=8;z80.l=readbyte(n);z80.f=z80.l&1;z80.l=z80.l&128|z80.l>>1;z80.f|=sz53p_table[z80.l];writebyte(n,z80.l)},n[46]=function(n){tstates+=8;var t=readbyte(n);z80.f=t&1;t=t&128|t>>1;z80.f|=sz53p_table[t];writebyte(n,t)},n[47]=function(n){tstates+=8;z80.a=readbyte(n);z80.f=z80.a&1;z80.a=z80.a&128|z80.a>>1;z80.f|=sz53p_table[z80.a];writebyte(n,z80.a)},n[48]=function(n){tstates+=8;z80.b=readbyte(n);z80.f=z80.b>>7;z80.b=z80.b<<1|1;z80.b&=255;z80.f|=sz53p_table[z80.b];writebyte(n,z80.b)},n[49]=function(n){tstates+=8;z80.c=readbyte(n);z80.f=z80.c>>7;z80.c=z80.c<<1|1;z80.c&=255;z80.f|=sz53p_table[z80.c];writebyte(n,z80.c)},n[50]=function(n){tstates+=8;z80.d=readbyte(n);z80.f=z80.d>>7;z80.d=z80.d<<1|1;z80.d&=255;z80.f|=sz53p_table[z80.d];writebyte(n,z80.d)},n[51]=function(n){tstates+=8;z80.e=readbyte(n);z80.f=z80.e>>7;z80.e=z80.e<<1|1;z80.e&=255;z80.f|=sz53p_table[z80.e];writebyte(n,z80.e)},n[52]=function(n){tstates+=8;z80.h=readbyte(n);z80.f=z80.h>>7;z80.h=z80.h<<1|1;z80.h&=255;z80.f|=sz53p_table[z80.h];writebyte(n,z80.h)},n[53]=function(n){tstates+=8;z80.l=readbyte(n);z80.f=z80.l>>7;z80.l=z80.l<<1|1;z80.l&=255;z80.f|=sz53p_table[z80.l];writebyte(n,z80.l)},n[54]=function(n){tstates+=8;var t=readbyte(n);z80.f=t>>7;t=t<<1|1;t&=255;z80.f|=sz53p_table[t];writebyte(n,t)},n[55]=function(n){tstates+=8;z80.a=readbyte(n);z80.f=z80.a>>7;z80.a=z80.a<<1|1;z80.a&=255;z80.f|=sz53p_table[z80.a];writebyte(n,z80.a)},n[56]=function(n){tstates+=8;z80.b=readbyte(n);z80.f=z80.b&1;z80.b>>=1;z80.f|=sz53p_table[z80.b];writebyte(n,z80.b)},n[57]=function(n){tstates+=8;z80.c=readbyte(n);z80.f=z80.c&1;z80.c>>=1;z80.f|=sz53p_table[z80.c];writebyte(n,z80.c)},n[58]=function(n){tstates+=8;z80.d=readbyte(n);z80.f=z80.d&1;z80.d>>=1;z80.f|=sz53p_table[z80.d];writebyte(n,z80.d)},n[59]=function(n){tstates+=8;z80.e=readbyte(n);z80.f=z80.e&1;z80.e>>=1;z80.f|=sz53p_table[z80.e];writebyte(n,z80.e)},n[60]=function(n){tstates+=8;z80.h=readbyte(n);z80.f=z80.h&1;z80.h>>=1;z80.f|=sz53p_table[z80.h];writebyte(n,z80.h)},n[61]=function(n){tstates+=8;z80.l=readbyte(n);z80.f=z80.l&1;z80.l>>=1;z80.f|=sz53p_table[z80.l];writebyte(n,z80.l)},n[62]=function(n){tstates+=8;var t=readbyte(n);z80.f=t&1;t>>=1;z80.f|=sz53p_table[t];writebyte(n,t)},n[63]=function(n){tstates+=8;z80.a=readbyte(n);z80.f=z80.a&1;z80.a>>=1;z80.f|=sz53p_table[z80.a];writebyte(n,z80.a)},n[64]=n[65]=n[66]=n[67]=n[68]=n[69]=n[70]=n[71]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&1||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[72]=n[73]=n[74]=n[75]=n[76]=n[77]=n[78]=n[79]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&2||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[80]=n[81]=n[82]=n[83]=n[84]=n[85]=n[86]=n[87]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&4||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[88]=n[89]=n[90]=n[91]=n[92]=n[93]=n[94]=n[95]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&8||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[96]=n[97]=n[98]=n[99]=n[100]=n[101]=n[102]=n[103]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&16||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[104]=n[105]=n[106]=n[107]=n[108]=n[109]=n[110]=n[111]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&32||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[112]=n[113]=n[114]=n[115]=n[116]=n[117]=n[118]=n[119]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&64||(z80.f|=68);!1&&t&128&&(z80.f|=128)},n[120]=n[121]=n[122]=n[123]=n[124]=n[125]=n[126]=n[127]=function(n){tstates+=5;var t=readbyte(n);z80.f=z80.f&1|16|n>>8&40;t&128||(z80.f|=68);!0&&t&128&&(z80.f|=128)},n[128]=function(n){tstates+=8;z80.b=readbyte(n)&254;writebyte(n,z80.b)},n[129]=function(n){tstates+=8;z80.c=readbyte(n)&254;writebyte(n,z80.c)},n[130]=function(n){tstates+=8;z80.d=readbyte(n)&254;writebyte(n,z80.d)},n[131]=function(n){tstates+=8;z80.e=readbyte(n)&254;writebyte(n,z80.e)},n[132]=function(n){tstates+=8;z80.h=readbyte(n)&254;writebyte(n,z80.h)},n[133]=function(n){tstates+=8;z80.l=readbyte(n)&254;writebyte(n,z80.l)},n[134]=function(n){tstates+=8;writebyte(n,readbyte(n)&254)},n[135]=function(n){tstates+=8;z80.a=readbyte(n)&254;writebyte(n,z80.a)},n[136]=function(n){tstates+=8;z80.b=readbyte(n)&253;writebyte(n,z80.b)},n[137]=function(n){tstates+=8;z80.c=readbyte(n)&253;writebyte(n,z80.c)},n[138]=function(n){tstates+=8;z80.d=readbyte(n)&253;writebyte(n,z80.d)},n[139]=function(n){tstates+=8;z80.e=readbyte(n)&253;writebyte(n,z80.e)},n[140]=function(n){tstates+=8;z80.h=readbyte(n)&253;writebyte(n,z80.h)},n[141]=function(n){tstates+=8;z80.l=readbyte(n)&253;writebyte(n,z80.l)},n[142]=function(n){tstates+=8;writebyte(n,readbyte(n)&253)},n[143]=function(n){tstates+=8;z80.a=readbyte(n)&253;writebyte(n,z80.a)},n[144]=function(n){tstates+=8;z80.b=readbyte(n)&251;writebyte(n,z80.b)},n[145]=function(n){tstates+=8;z80.c=readbyte(n)&251;writebyte(n,z80.c)},n[146]=function(n){tstates+=8;z80.d=readbyte(n)&251;writebyte(n,z80.d)},n[147]=function(n){tstates+=8;z80.e=readbyte(n)&251;writebyte(n,z80.e)},n[148]=function(n){tstates+=8;z80.h=readbyte(n)&251;writebyte(n,z80.h)},n[149]=function(n){tstates+=8;z80.l=readbyte(n)&251;writebyte(n,z80.l)},n[150]=function(n){tstates+=8;writebyte(n,readbyte(n)&251)},n[151]=function(n){tstates+=8;z80.a=readbyte(n)&251;writebyte(n,z80.a)},n[152]=function(n){tstates+=8;z80.b=readbyte(n)&247;writebyte(n,z80.b)},n[153]=function(n){tstates+=8;z80.c=readbyte(n)&247;writebyte(n,z80.c)},n[154]=function(n){tstates+=8;z80.d=readbyte(n)&247;writebyte(n,z80.d)},n[155]=function(n){tstates+=8;z80.e=readbyte(n)&247;writebyte(n,z80.e)},n[156]=function(n){tstates+=8;z80.h=readbyte(n)&247;writebyte(n,z80.h)},n[157]=function(n){tstates+=8;z80.l=readbyte(n)&247;writebyte(n,z80.l)},n[158]=function(n){tstates+=8;writebyte(n,readbyte(n)&247)},n[159]=function(n){tstates+=8;z80.a=readbyte(n)&247;writebyte(n,z80.a)},n[160]=function(n){tstates+=8;z80.b=readbyte(n)&239;writebyte(n,z80.b)},n[161]=function(n){tstates+=8;z80.c=readbyte(n)&239;writebyte(n,z80.c)},n[162]=function(n){tstates+=8;z80.d=readbyte(n)&239;writebyte(n,z80.d)},n[163]=function(n){tstates+=8;z80.e=readbyte(n)&239;writebyte(n,z80.e)},n[164]=function(n){tstates+=8;z80.h=readbyte(n)&239;writebyte(n,z80.h)},n[165]=function(n){tstates+=8;z80.l=readbyte(n)&239;writebyte(n,z80.l)},n[166]=function(n){tstates+=8;writebyte(n,readbyte(n)&239)},n[167]=function(n){tstates+=8;z80.a=readbyte(n)&239;writebyte(n,z80.a)},n[168]=function(n){tstates+=8;z80.b=readbyte(n)&223;writebyte(n,z80.b)},n[169]=function(n){tstates+=8;z80.c=readbyte(n)&223;writebyte(n,z80.c)},n[170]=function(n){tstates+=8;z80.d=readbyte(n)&223;writebyte(n,z80.d)},n[171]=function(n){tstates+=8;z80.e=readbyte(n)&223;writebyte(n,z80.e)},n[172]=function(n){tstates+=8;z80.h=readbyte(n)&223;writebyte(n,z80.h)},n[173]=function(n){tstates+=8;z80.l=readbyte(n)&223;writebyte(n,z80.l)},n[174]=function(n){tstates+=8;writebyte(n,readbyte(n)&223)},n[175]=function(n){tstates+=8;z80.a=readbyte(n)&223;writebyte(n,z80.a)},n[176]=function(n){tstates+=8;z80.b=readbyte(n)&191;writebyte(n,z80.b)},n[177]=function(n){tstates+=8;z80.c=readbyte(n)&191;writebyte(n,z80.c)},n[178]=function(n){tstates+=8;z80.d=readbyte(n)&191;writebyte(n,z80.d)},n[179]=function(n){tstates+=8;z80.e=readbyte(n)&191;writebyte(n,z80.e)},n[180]=function(n){tstates+=8;z80.h=readbyte(n)&191;writebyte(n,z80.h)},n[181]=function(n){tstates+=8;z80.l=readbyte(n)&191;writebyte(n,z80.l)},n[182]=function(n){tstates+=8;writebyte(n,readbyte(n)&191)},n[183]=function(n){tstates+=8;z80.a=readbyte(n)&191;writebyte(n,z80.a)},n[184]=function(n){tstates+=8;z80.b=readbyte(n)&127;writebyte(n,z80.b)},n[185]=function(n){tstates+=8;z80.c=readbyte(n)&127;writebyte(n,z80.c)},n[186]=function(n){tstates+=8;z80.d=readbyte(n)&127;writebyte(n,z80.d)},n[187]=function(n){tstates+=8;z80.e=readbyte(n)&127;writebyte(n,z80.e)},n[188]=function(n){tstates+=8;z80.h=readbyte(n)&127;writebyte(n,z80.h)},n[189]=function(n){tstates+=8;z80.l=readbyte(n)&127;writebyte(n,z80.l)},n[190]=function(n){tstates+=8;writebyte(n,readbyte(n)&127)},n[191]=function(n){tstates+=8;z80.a=readbyte(n)&127;writebyte(n,z80.a)},n[192]=function(n){tstates+=8;z80.b=readbyte(n)|1;writebyte(n,z80.b)},n[193]=function(n){tstates+=8;z80.c=readbyte(n)|1;writebyte(n,z80.c)},n[194]=function(n){tstates+=8;z80.d=readbyte(n)|1;writebyte(n,z80.d)},n[195]=function(n){tstates+=8;z80.e=readbyte(n)|1;writebyte(n,z80.e)},n[196]=function(n){tstates+=8;z80.h=readbyte(n)|1;writebyte(n,z80.h)},n[197]=function(n){tstates+=8;z80.l=readbyte(n)|1;writebyte(n,z80.l)},n[198]=function(n){tstates+=8;writebyte(n,readbyte(n)|1)},n[199]=function(n){tstates+=8;z80.a=readbyte(n)|1;writebyte(n,z80.a)},n[200]=function(n){tstates+=8;z80.b=readbyte(n)|2;writebyte(n,z80.b)},n[201]=function(n){tstates+=8;z80.c=readbyte(n)|2;writebyte(n,z80.c)},n[202]=function(n){tstates+=8;z80.d=readbyte(n)|2;writebyte(n,z80.d)},n[203]=function(n){tstates+=8;z80.e=readbyte(n)|2;writebyte(n,z80.e)},n[204]=function(n){tstates+=8;z80.h=readbyte(n)|2;writebyte(n,z80.h)},n[205]=function(n){tstates+=8;z80.l=readbyte(n)|2;writebyte(n,z80.l)},n[206]=function(n){tstates+=8;writebyte(n,readbyte(n)|2)},n[207]=function(n){tstates+=8;z80.a=readbyte(n)|2;writebyte(n,z80.a)},n[208]=function(n){tstates+=8;z80.b=readbyte(n)|4;writebyte(n,z80.b)},n[209]=function(n){tstates+=8;z80.c=readbyte(n)|4;writebyte(n,z80.c)},n[210]=function(n){tstates+=8;z80.d=readbyte(n)|4;writebyte(n,z80.d)},n[211]=function(n){tstates+=8;z80.e=readbyte(n)|4;writebyte(n,z80.e)},n[212]=function(n){tstates+=8;z80.h=readbyte(n)|4;writebyte(n,z80.h)},n[213]=function(n){tstates+=8;z80.l=readbyte(n)|4;writebyte(n,z80.l)},n[214]=function(n){tstates+=8;writebyte(n,readbyte(n)|4)},n[215]=function(n){tstates+=8;z80.a=readbyte(n)|4;writebyte(n,z80.a)},n[216]=function(n){tstates+=8;z80.b=readbyte(n)|8;writebyte(n,z80.b)},n[217]=function(n){tstates+=8;z80.c=readbyte(n)|8;writebyte(n,z80.c)},n[218]=function(n){tstates+=8;z80.d=readbyte(n)|8;writebyte(n,z80.d)},n[219]=function(n){tstates+=8;z80.e=readbyte(n)|8;writebyte(n,z80.e)},n[220]=function(n){tstates+=8;z80.h=readbyte(n)|8;writebyte(n,z80.h)},n[221]=function(n){tstates+=8;z80.l=readbyte(n)|8;writebyte(n,z80.l)},n[222]=function(n){tstates+=8;writebyte(n,readbyte(n)|8)},n[223]=function(n){tstates+=8;z80.a=readbyte(n)|8;writebyte(n,z80.a)},n[224]=function(n){tstates+=8;z80.b=readbyte(n)|16;writebyte(n,z80.b)},n[225]=function(n){tstates+=8;z80.c=readbyte(n)|16;writebyte(n,z80.c)},n[226]=function(n){tstates+=8;z80.d=readbyte(n)|16;writebyte(n,z80.d)},n[227]=function(n){tstates+=8;z80.e=readbyte(n)|16;writebyte(n,z80.e)},n[228]=function(n){tstates+=8;z80.h=readbyte(n)|16;writebyte(n,z80.h)},n[229]=function(n){tstates+=8;z80.l=readbyte(n)|16;writebyte(n,z80.l)},n[230]=function(n){tstates+=8;writebyte(n,readbyte(n)|16)},n[231]=function(n){tstates+=8;z80.a=readbyte(n)|16;writebyte(n,z80.a)},n[232]=function(n){tstates+=8;z80.b=readbyte(n)|32;writebyte(n,z80.b)},n[233]=function(n){tstates+=8;z80.c=readbyte(n)|32;writebyte(n,z80.c)},n[234]=function(n){tstates+=8;z80.d=readbyte(n)|32;writebyte(n,z80.d)},n[235]=function(n){tstates+=8;z80.e=readbyte(n)|32;writebyte(n,z80.e)},n[236]=function(n){tstates+=8;z80.h=readbyte(n)|32;writebyte(n,z80.h)},n[237]=function(n){tstates+=8;z80.l=readbyte(n)|32;writebyte(n,z80.l)},n[238]=function(n){tstates+=8;writebyte(n,readbyte(n)|32)},n[239]=function(n){tstates+=8;z80.a=readbyte(n)|32;writebyte(n,z80.a)},n[240]=function(n){tstates+=8;z80.b=readbyte(n)|64;writebyte(n,z80.b)},n[241]=function(n){tstates+=8;z80.c=readbyte(n)|64;writebyte(n,z80.c)},n[242]=function(n){tstates+=8;z80.d=readbyte(n)|64;writebyte(n,z80.d)},n[243]=function(n){tstates+=8;z80.e=readbyte(n)|64;writebyte(n,z80.e)},n[244]=function(n){tstates+=8;z80.h=readbyte(n)|64;writebyte(n,z80.h)},n[245]=function(n){tstates+=8;z80.l=readbyte(n)|64;writebyte(n,z80.l)},n[246]=function(n){tstates+=8;writebyte(n,readbyte(n)|64)},n[247]=function(n){tstates+=8;z80.a=readbyte(n)|64;writebyte(n,z80.a)},n[248]=function(n){tstates+=8;z80.b=readbyte(n)|128;writebyte(n,z80.b)},n[249]=function(n){tstates+=8;z80.c=readbyte(n)|128;writebyte(n,z80.c)},n[250]=function(n){tstates+=8;z80.d=readbyte(n)|128;writebyte(n,z80.d)},n[251]=function(n){tstates+=8;z80.e=readbyte(n)|128;writebyte(n,z80.e)},n[252]=function(n){tstates+=8;z80.h=readbyte(n)|128;writebyte(n,z80.h)},n[253]=function(n){tstates+=8;z80.l=readbyte(n)|128;writebyte(n,z80.l)},n[254]=function(n){tstates+=8;writebyte(n,readbyte(n)|128)},n[255]=function(n){tstates+=8;z80.a=readbyte(n)|128;writebyte(n,z80.a)},n[256]=function(){},z80_defaults(n),n}();var vram=[],vramUntwiddled=[],vdp_regs=[],palette=[],paletteR=[],paletteG=[],paletteB=[],paletteRGB=[],vdp_addr_state=0,vdp_mode_select=0,vdp_addr_latch=0,vdp_addr=0,vdp_current_line=0,vdp_status=0,vdp_pending_hblank=!1,vdp_hblank_counter=0;prev_border=null;borderColourCss=null;currentFrame=1;var ram=[],cartridgeRam=[],romBanks=[],pages=[],ramSelectRegister=0,romPageMask=0,canvas,ctx,imageData,fb8,fb32,joystick=65535,inputMode=0,soundChip,initialized=!1;const framesPerSecond=50,scanLinesPerFrame=313,scanLinesPerSecond=scanLinesPerFrame*framesPerSecond,cpuHz=358e4,tstatesPerHblank=Math.ceil(cpuHz/scanLinesPerSecond)|0,event_next_event=tstatesPerHblank;tstates=0;const targetTimeout=1e3/framesPerSecond,pausedTimeout=2*targetTimeout,linesPerYield=20;var lastFrame=Date.now(),cycles=0,cyclet=0;keys={87:1,83:2,65:4,68:8,32:16,13:32,38:1,40:2,37:4,39:8,90:16,88:32,82:4096};running=!1;currentRom=0,function(){"use strict";var n=global.x;n.versions.push("Shinobi/v1.0.0000");console.log(document.childNodes[1].textContent);n.extendClass(n.Game,window,"Shinobi",n.noop,function(t){var i=256,r=192,u=r/i;t.initialize=function(){function u(t,i){n.addPressReleaseHandlers(t,function(t){joystick&=~i;n.cancelEvent(t)},function(t){joystick|=i;n.cancelEvent(t)})}var t=document.getElementById("game-view");if(t.width=i,t.height=r,!n.isFunction(t.getContext))throw new Error(n.E.BROWSER);u("trig-1",16);u("trig-2",32);var f={zone:document.getElementById("dpad-area"),color:"#DDDDDD",mode:"dynamic"},e=nipplejs.create(f);e.on("added",function(n,t){t.on("dir:up",function(){joystick&=-2;joystick|=2});t.on("dir:down",function(){joystick&=-3;joystick|=1});t.on("dir:left",function(){joystick&=-5;joystick|=8});t.on("dir:right",function(){joystick&=-9;joystick|=4});t.on("end",function(){joystick|=15})}).on("removed",function(n,t){t.off("dir:up dir:right dir:down dir:left end")});n.addClickHandler("trig-change",function(t){loadNextRom();n.cancelEvent(t)});n.addPressHandler("trig-pause",function(t){z80_nmi();n.cancelEvent(t)});this.view=t;this.vgcx=t.getContext("2d")};t.go=function(){var t=document.getElementById("power-on");n.addClickHandler(t,function(){t.style.display="none";n.showLayout();go();ctx.fillStyle="rgba(127, 127, 127, 0.5)"})};t.layout=function(t,i){n.write(t+"x"+i);var r,f,e=i/t;e>u?(r=t,f=Math.floor(t*u)):(r=Math.floor(i/u),f=i);this.view.style.width=r+"px";this.view.style.height=f+"px"};t.resume=function(){start()};t.suspend=function(){z80_nmi();stop();this.vgcx.fillRect(0,0,i,r)}});Shinobi()}();